<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="https://nickhuangcyh.github.io/blog/feed.xml" rel="self" type="application/atom+xml" /><link href="https://nickhuangcyh.github.io/blog/" rel="alternate" type="text/html" /><updated>2025-04-20T14:09:12+00:00</updated><id>https://nickhuangcyh.github.io/blog/feed.xml</id><title type="html">Nickâ€™s Blog</title><subtitle>An amazing website.</subtitle><author><name>Nick Huang</name></author><entry><title type="html">ğŸš€ å¦‚ä½•ä½¿ç”¨ Excalidraw AI å¿«é€Ÿç”Ÿæˆå°ˆæ¥­ç´šåœ–è¡¨ï¼Œæå‡å·¥ä½œæ•ˆç‡ï¼</title><link href="https://nickhuangcyh.github.io/blog/ai%20tools/visualization/productivity/ai-tools-excalidraw-chart-guide/" rel="alternate" type="text/html" title="ğŸš€ å¦‚ä½•ä½¿ç”¨ Excalidraw AI å¿«é€Ÿç”Ÿæˆå°ˆæ¥­ç´šåœ–è¡¨ï¼Œæå‡å·¥ä½œæ•ˆç‡ï¼" /><published>2025-03-15T08:30:00+00:00</published><updated>2025-03-15T08:30:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/ai%20tools/visualization/productivity/ai-tools-excalidraw-chart-guide</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/ai%20tools/visualization/productivity/ai-tools-excalidraw-chart-guide/">&lt;h2 id=&quot;-å‰è¨€&quot;&gt;ğŸ“¢ &lt;strong&gt;å‰è¨€&lt;/strong&gt;&lt;/h2&gt;

&lt;p&gt;åœ¨ç¾ä»£å·¥ä½œä¸­ï¼Œç„¡è«–æ˜¯ &lt;strong&gt;å·¥ç¨‹å¸«ã€è¨­è¨ˆå¸«ã€å•†æ¥­åˆ†æå¸«é‚„æ˜¯æ•™è‚²å·¥ä½œè€…&lt;/strong&gt;ï¼Œéƒ½éœ€è¦è£½ä½œåœ–è¡¨ä¾†è¦–è¦ºåŒ–è³‡è¨Šã€‚ç„¶è€Œï¼Œå‚³çµ±çš„ç¹ªåœ–å·¥å…·é€šå¸¸éœ€è¦æ‰‹å‹•æ‹–æ‹‰å…ƒä»¶ã€èª¿æ•´ç·šæ¢ï¼Œæ—¢è€—æ™‚åˆç¹ç‘£ã€‚&lt;/p&gt;

&lt;p&gt;ç¾åœ¨ï¼Œé€é &lt;strong&gt;Excalidraw AI&lt;/strong&gt;ï¼Œæˆ‘å€‘å¯ä»¥é€éç°¡å–®çš„æ–‡å­—æè¿°ï¼Œè‡ªå‹•ç”Ÿæˆ &lt;strong&gt;æµç¨‹åœ–ã€å¿ƒæ™ºåœ–ã€æŠ€è¡“æ¶æ§‹åœ–ã€å•†æ¥­æµç¨‹åœ–&lt;/strong&gt; ç­‰ï¼Œå¤§å¹…æé«˜å·¥ä½œæ•ˆç‡ï¼&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡å°‡ä»‹ç´¹ Excalidraw AI çš„å¼·å¤§åŠŸèƒ½ï¼Œä¸¦é€éä¸€å€‹ &lt;strong&gt;MQTT é€šè¨Šå”å®šæµç¨‹åœ–&lt;/strong&gt;ï¼Œå±•ç¤ºå¦‚ä½•å¿«é€Ÿç”Ÿæˆå°ˆæ¥­ç´šåœ–è¡¨ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;-ç‚ºä»€éº¼é¸æ“‡-excalidraw-ai&quot;&gt;ğŸ¯ &lt;strong&gt;ç‚ºä»€éº¼é¸æ“‡ Excalidraw AIï¼Ÿ&lt;/strong&gt;&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Excalidraw&lt;/strong&gt; æ˜¯ä¸€æ¬¾é–‹æºçš„ &lt;strong&gt;æ‰‹ç¹ªé¢¨æ ¼ç¹ªåœ–å·¥å…·&lt;/strong&gt;ï¼Œè€Œ &lt;strong&gt;Excalidraw AI&lt;/strong&gt; å‰‡åŠ å…¥äº† &lt;strong&gt;AI è‡ªå‹•ç¹ªåœ–åŠŸèƒ½&lt;/strong&gt;ï¼Œåªéœ€è¼¸å…¥ç°¡å–®çš„æ–‡å­—æè¿°ï¼Œå®ƒå°±èƒ½æ™ºèƒ½è­˜åˆ¥å…§å®¹ä¸¦è‡ªå‹•ç”Ÿæˆåœ–è¡¨ã€‚&lt;/p&gt;

&lt;h3 id=&quot;-excalidraw-ai-çš„ä¸»è¦å„ªå‹¢&quot;&gt;âœ… &lt;strong&gt;Excalidraw AI çš„ä¸»è¦å„ªå‹¢&lt;/strong&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;ğŸš€ å¿«é€Ÿç”Ÿæˆåœ–è¡¨&lt;/strong&gt;ï¼šç„¡éœ€æ‰‹å‹•ç¹ªè£½ï¼Œåªéœ€è¼¸å…¥æè¿°ï¼Œå³å¯ç²å¾—å®Œæ•´åœ–è¡¨ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ğŸ“Š æ”¯æ´å¤šç¨®åœ–è¡¨é¡å‹&lt;/strong&gt;ï¼šæµç¨‹åœ–ã€å¿ƒæ™ºåœ–ã€æŠ€è¡“æ¶æ§‹åœ–ã€å•†æ¥­åœ–è¡¨ç­‰æ‡‰æœ‰ç›¡æœ‰ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;âœï¸ å¯ç·¨è¼¯èˆ‡è‡ªè¨‚&lt;/strong&gt;ï¼šç”Ÿæˆå¾Œçš„åœ–è¡¨ä»ç„¶å¯ä»¥æ‰‹å‹•èª¿æ•´ï¼Œç¬¦åˆå€‹äººéœ€æ±‚ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ğŸ†“ é–‹æºä¸”å…è²»&lt;/strong&gt;ï¼šå¯ç›´æ¥åœ¨ç·šä½¿ç”¨ï¼Œç„¡éœ€å®‰è£é¡å¤–è»Ÿé«”ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;-å¦‚ä½•ä½¿ç”¨-excalidraw-ai-ç”Ÿæˆå°ˆæ¥­ç´šåœ–è¡¨&quot;&gt;ğŸ›  &lt;strong&gt;å¦‚ä½•ä½¿ç”¨ Excalidraw AI ç”Ÿæˆå°ˆæ¥­ç´šåœ–è¡¨ï¼Ÿ&lt;/strong&gt;&lt;/h2&gt;

&lt;h3 id=&quot;1ï¸âƒ£-é€²å…¥-excalidraw-ai&quot;&gt;1ï¸âƒ£ &lt;strong&gt;é€²å…¥ Excalidraw AI&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆï¼Œæ‰“é–‹ &lt;strong&gt;&lt;a href=&quot;https://excalidraw.com/&quot;&gt;Excalidraw AI å®˜æ–¹ç¶²ç«™&lt;/a&gt;&lt;/strong&gt;ã€‚
é¸å–å³ä¸Šè§’ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ›´å¤šå·¥å…·&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ–‡å­—è½‰åœ–è¡¨ AI&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/ai_tools_excalidraw_1.png&quot; alt=&quot;ai_tools_excalidraw_1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;2ï¸âƒ£-è¼¸å…¥æ–‡å­—æè¿°&quot;&gt;2ï¸âƒ£ &lt;strong&gt;è¼¸å…¥æ–‡å­—æè¿°&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;åœ¨æ–‡å­—è¼¸å…¥æ¡†å…§ï¼Œè¼¸å…¥ä»¥ä¸‹æè¿°ä¾†ç”Ÿæˆä¸€å€‹ &lt;strong&gt;MQTT é€šè¨Šå”å®šæµç¨‹åœ–&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Title: Client-Client Communication via Server
1. Phone and Device connect to the MQTT Broker
    * Both connect to the same MQTT Broker.
2. Phone subscribes to the Device&apos;s status topic
    * Phone subscribes to Device&apos;s status (e.g., smartlight/status).
3. Device reports its status
    * Device publishes its status (e.g., light on/off) to the topic.
4. Phone receives status updates
    * Phone receives and updates the status (e.g., light turned on/off).
5. Phone sends control commands to Device
    * Phone sends control commands (e.g., turn on/off) to the topic.
6. Device executes commands and updates status
    * Device executes the command and updates the status.
7. Phone receives the new status and updates UI
    * Phone receives new status and updates the interface.
8. Device sends a Last Will and Testament (LWT) message if it disconnects
    * If Device disconnects, an LWT message (e.g., &quot;status&quot;: &quot;offline&quot;) is sent.
9. Phone disconnects from the Broker
    * Phone disconnects after completing the tasks.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/ai_tools_excalidraw_2.png&quot; alt=&quot;ai_tools_excalidraw_2&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;3ï¸âƒ£-ai-è‡ªå‹•ç”Ÿæˆåœ–è¡¨&quot;&gt;3ï¸âƒ£ &lt;strong&gt;AI è‡ªå‹•ç”Ÿæˆåœ–è¡¨&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;Excalidraw AI æœƒæ ¹æ“šä½ çš„æè¿°ï¼Œè‡ªå‹•ç”Ÿæˆå°æ‡‰çš„æµç¨‹åœ–ï¼Œä½ å¯ä»¥é€²ä¸€æ­¥ &lt;strong&gt;èª¿æ•´ç¯€é»ã€ç·šæ¢&lt;/strong&gt;ï¼Œä½¿å…¶æ›´åŠ æ¸…æ™°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/ai_tools_excalidraw_3.jpg&quot; alt=&quot;ai_tools_excalidraw_3&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;-excalidraw-ai-çš„æ‡‰ç”¨å ´æ™¯&quot;&gt;ğŸ¯ &lt;strong&gt;Excalidraw AI çš„æ‡‰ç”¨å ´æ™¯&lt;/strong&gt;&lt;/h2&gt;

&lt;h3 id=&quot;-å·¥ç¨‹èˆ‡æŠ€è¡“é ˜åŸŸ&quot;&gt;ğŸ‘¨â€ğŸ’» &lt;strong&gt;å·¥ç¨‹èˆ‡æŠ€è¡“é ˜åŸŸ&lt;/strong&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;æŠ€è¡“æ¶æ§‹åœ–&lt;/strong&gt;ï¼šå¿«é€Ÿç¹ªè£½ API äº¤äº’ã€ç³»çµ±æ¶æ§‹ã€æ•¸æ“šæµåœ–ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ç¶²çµ¡é€šè¨Šæµç¨‹åœ–&lt;/strong&gt;ï¼šå±•ç¤ºä¼ºæœå™¨ã€å®¢æˆ¶ç«¯ã€å”è­°æ•¸æ“šäº¤æ›ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;-è¨­è¨ˆèˆ‡å‰µæ„é ˜åŸŸ&quot;&gt;ğŸ¨ &lt;strong&gt;è¨­è¨ˆèˆ‡å‰µæ„é ˜åŸŸ&lt;/strong&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;æ‰‹ç¹ªé¢¨åœ–è¡¨&lt;/strong&gt;ï¼šé©åˆè¨­è¨ˆå¸«ã€å‰µæ„å·¥ä½œè€…è£½ä½œå…·è‰åœ–é¢¨æ ¼çš„åœ–å½¢ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ä»‹é¢æµç¨‹åœ–&lt;/strong&gt;ï¼šè¨­è¨ˆç”¢å“ UX æµç¨‹ï¼Œå„ªåŒ–ä½¿ç”¨è€…é«”é©—ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;-å•†æ¥­èˆ‡ç­–ç•¥é ˜åŸŸ&quot;&gt;ğŸ“Š &lt;strong&gt;å•†æ¥­èˆ‡ç­–ç•¥é ˜åŸŸ&lt;/strong&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;å•†æ¥­æµç¨‹åœ–&lt;/strong&gt;ï¼šä¼æ¥­ç®¡ç†äººå“¡å¯ç”¨ä¾†è¦åŠƒå·¥ä½œæµç¨‹ã€æ¥­å‹™é‹ä½œã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;å°ˆæ¡ˆç®¡ç†è¦–è¦ºåœ–&lt;/strong&gt;ï¼šè¦–è¦ºåŒ–å°ˆæ¡ˆè¦åŠƒï¼Œæå‡åœ˜éšŠæºé€šæ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;-æ•™è‚²èˆ‡å­¸ç¿’é ˜åŸŸ&quot;&gt;ğŸ“š &lt;strong&gt;æ•™è‚²èˆ‡å­¸ç¿’é ˜åŸŸ&lt;/strong&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;å¿ƒæ™ºåœ–&lt;/strong&gt;ï¼šå¹«åŠ©å­¸ç”Ÿã€ç ”ç©¶äººå“¡æ•´ç†æ€è·¯ï¼Œå¿«é€Ÿæ­å»ºæ¦‚å¿µçµæ§‹ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;æ•™å­¸ç¤ºæ„åœ–&lt;/strong&gt;ï¼šæ•™å¸«èˆ‡è¬›å¸«å¯åˆ©ç”¨å®ƒä¾†è¦–è¦ºåŒ–å„ç¨®çŸ¥è­˜é»ï¼Œæé«˜å­¸ç¿’æ•ˆæœã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;-ai-ç¹ªåœ–å·¥å…·å¦‚ä½•æå‡ä½ çš„å·¥ä½œæ•ˆç‡&quot;&gt;âš¡ &lt;strong&gt;AI ç¹ªåœ–å·¥å…·å¦‚ä½•æå‡ä½ çš„å·¥ä½œæ•ˆç‡ï¼Ÿ&lt;/strong&gt;&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;ğŸš€ çœæ™‚çœåŠ›&lt;/strong&gt;ï¼šæ¯”èµ·å‚³çµ±æ‰‹å‹•ç¹ªè£½ï¼ŒAI åªéœ€æ•¸ç§’å°±èƒ½ç”Ÿæˆå®Œæ•´åœ–è¡¨ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ğŸ–¥ ç„¡ç—›ä¿®æ”¹&lt;/strong&gt;ï¼šAI ç”Ÿæˆå¾Œçš„åœ–è¡¨ä»å¯æ‰‹å‹•å¾®èª¿ï¼Œç¢ºä¿ç¬¦åˆéœ€æ±‚ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ğŸ“ˆ æé«˜å°ˆæ¥­åº¦&lt;/strong&gt;ï¼šæŠ€è¡“æ–‡ä»¶ã€å•†æ¥­ç°¡å ±ã€æ•™å­¸å…§å®¹çš„è¦–è¦ºæ•ˆæœç¬é–“æå‡ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ğŸ†“ å…è²»ä½¿ç”¨&lt;/strong&gt;ï¼šç„¡éœ€é¡å¤–è³¼è²·è»Ÿé«”ï¼Œé–‹æºå·¥å…· Excalidraw è®“æ¯å€‹äººéƒ½èƒ½è¼•é¬†ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;-çµè«–&quot;&gt;ğŸ”¥ &lt;strong&gt;çµè«–&lt;/strong&gt;&lt;/h2&gt;

&lt;p&gt;é€é &lt;strong&gt;Excalidraw AI&lt;/strong&gt;ï¼Œä¸åƒ… &lt;strong&gt;å·¥ç¨‹å¸«&lt;/strong&gt; å¯ä»¥å¿«é€Ÿå°‡ &lt;strong&gt;æŠ€è¡“æ¶æ§‹ã€é€šè¨Šå”è­°ã€æ•¸æ“šæµè¨­è¨ˆ&lt;/strong&gt; è½‰æ›ç‚ºè¦–è¦ºåŒ–åœ–è¡¨ï¼Œ&lt;strong&gt;è¨­è¨ˆå¸«ã€æ•™å¸«ã€å•†æ¥­åˆ†æå¸«&lt;/strong&gt; ä¹Ÿèƒ½åˆ©ç”¨å®ƒä¾† &lt;strong&gt;å‰µå»ºæ‰‹ç¹ªé¢¨åœ–è¡¨ã€å¿ƒæ™ºåœ–ã€å•†æ¥­æµç¨‹åœ–&lt;/strong&gt;ï¼Œæ¥µå¤§æå‡å‰µä½œèˆ‡æºé€šæ•ˆç‡ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ ç¶“å¸¸éœ€è¦è£½ä½œå„é¡è¦–è¦ºåŒ–åœ–è¡¨ï¼Œä¸å¦¨è©¦è©¦ &lt;strong&gt;Excalidraw AI&lt;/strong&gt;ï¼Œè®“ AI å¹«ä½ å®Œæˆç¹ç‘£çš„åœ–è¡¨ç¹ªè£½å·¥ä½œï¼Œè®“ä½ çš„å°ˆæ¡ˆæ›´é«˜æ•ˆã€æ›´å°ˆæ¥­ï¼&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;ğŸ”— &lt;strong&gt;å»¶ä¼¸é–±è®€&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://excalidraw.com/&quot;&gt;Excalidraw å®˜æ–¹ç¶²ç«™&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/excalidraw/excalidraw&quot;&gt;Excalidraw AI GitHub å°ˆæ¡ˆ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Nick Huang</name></author><category term="AI Tools" /><category term="Visualization" /><category term="Productivity" /><category term="Excalidraw" /><category term="AI Drawing" /><category term="Diagram Tool" /><category term="Flowchart" /><category term="Mind Map" /><summary type="html">ä½¿ç”¨ Excalidraw AI åªéœ€è¼¸å…¥æ–‡å­—æè¿°ï¼Œå³å¯å¿«é€Ÿç”Ÿæˆæµç¨‹åœ–ã€æŠ€è¡“æ¶æ§‹åœ–ã€å¿ƒæ™ºåœ–ç­‰ï¼Œæå‡å·¥ä½œæ•ˆç‡ï¼</summary></entry><entry><title type="html">Setup Development Environment on a New macOS</title><link href="https://nickhuangcyh.github.io/blog/setup%20guide/setup-development-environment-on-a-new-macos/" rel="alternate" type="text/html" title="Setup Development Environment on a New macOS" /><published>2025-01-11T07:00:00+00:00</published><updated>2025-01-11T07:00:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/setup%20guide/setup-development-environment-on-a-new-macos</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/setup%20guide/setup-development-environment-on-a-new-macos/">&lt;h1 id=&quot;setup-development-environment-on-a-new-macos&quot;&gt;Setup Development Environment on a New macOS&lt;/h1&gt;

&lt;h2 id=&quot;install-homebrew&quot;&gt;Install &lt;a href=&quot;https://brew.sh/index_zh-tw&quot;&gt;Homebrew&lt;/a&gt;&lt;/h2&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/bin/bash &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;common-issue&quot;&gt;Common Issue&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Warning: /opt/homebrew/bin is not &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;your PATH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To resolve this, add Homebrewâ€™s bin directory to your PATH:&lt;/p&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vim ~/.zshrc
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/homebrew/bin:&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;
:wq
&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.zshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Refer to &lt;a href=&quot;https://stackoverflow.com/questions/65487249/getting-a-warning-when-installing-homebrew-on-macos-big-sur-m1-chip&quot;&gt;this StackOverflow thread&lt;/a&gt; for more details.&lt;/p&gt;

&lt;h2 id=&quot;install-git&quot;&gt;Install Git&lt;/h2&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;setup-git-email--name&quot;&gt;&lt;a href=&quot;https://stackoverflow.com/questions/46941346/how-to-know-the-git-username-and-email-saved-during-configuration/53940971&quot;&gt;Setup Git Email &amp;amp; Name&lt;/a&gt;&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.email &lt;span class=&quot;s2&quot;&gt;&quot;you@example.com&quot;&lt;/span&gt;
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.name &lt;span class=&quot;s2&quot;&gt;&quot;Your Name&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;setup-git-alias&quot;&gt;&lt;a href=&quot;https://stackoverflow.com/questions/2553786/how-do-i-alias-commands-in-git&quot;&gt;Setup Git Alias&lt;/a&gt;&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; alias.co checkout
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; alias.ci commit
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; alias.st status
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; alias.br branch
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;install-iterm2&quot;&gt;Install &lt;a href=&quot;https://formulae.brew.sh/cask/iterm2&quot;&gt;iTerm2&lt;/a&gt;&lt;/h2&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew tap homebrew/cask
brew &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--cask&lt;/span&gt; iterm2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Switch from the default Terminal to iTerm2.&lt;/p&gt;

&lt;h2 id=&quot;iterm2--zsh-setup&quot;&gt;iTerm2 + Zsh Setup&lt;/h2&gt;

&lt;h3 id=&quot;install-zsh&quot;&gt;Install &lt;a href=&quot;https://formulae.brew.sh/formula/zsh#default&quot;&gt;Zsh&lt;/a&gt;&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;zsh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;install-oh-my-zsh&quot;&gt;Install &lt;a href=&quot;https://ohmyz.sh/#install&quot;&gt;Oh-My-Zsh&lt;/a&gt;&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sh &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;setup-colors&quot;&gt;Setup Colors&lt;/h3&gt;

&lt;p&gt;Navigate to Preferences -&amp;gt; Profiles -&amp;gt; Colors -&amp;gt; Select â€˜Solarizedâ€™.&lt;/p&gt;

&lt;h3 id=&quot;install-fonts&quot;&gt;Install Fonts&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew tap homebrew/cask-fonts
brew search font-meslo-lg-nerd-font
brew &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--cask&lt;/span&gt; font-meslo-lg-nerd-font
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Set your terminal font to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;font-meslo-lg-nerd-font&lt;/code&gt; in Preferences.&lt;/p&gt;

&lt;h3 id=&quot;install-powerlevel10k-theme&quot;&gt;Install &lt;a href=&quot;https://github.com/romkatv/powerlevel10k&quot;&gt;Powerlevel10k&lt;/a&gt; Theme&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone &lt;span class=&quot;nt&quot;&gt;--depth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 https://github.com/romkatv/powerlevel10k.git &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ZSH_CUSTOM&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:-&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$HOME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/.oh-my-zsh/custom&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/themes/powerlevel10k
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Update your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt; to use Powerlevel10k:&lt;/p&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;ZSH_THEME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;powerlevel10k/powerlevel10k&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run the following to configure the theme:&lt;/p&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;p10k configure
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;install-zsh-syntax-highlighting&quot;&gt;Install &lt;a href=&quot;https://github.com/zsh-users/zsh-syntax-highlighting&quot;&gt;Zsh-Syntax-Highlighting&lt;/a&gt;&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/zsh-users/zsh-syntax-highlighting.git &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ZSH_CUSTOM&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:-&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;~/.oh-my-zsh/custom&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/plugins/zsh-syntax-highlighting
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Activate the plugin in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;... zsh-syntax-highlighting&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;install-zsh-autosuggestions&quot;&gt;Install &lt;a href=&quot;https://github.com/zsh-users/zsh-autosuggestions&quot;&gt;Zsh-Autosuggestions&lt;/a&gt;&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/zsh-users/zsh-autosuggestions &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ZSH_CUSTOM&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:-&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;~/.oh-my-zsh/custom&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/plugins/zsh-autosuggestions
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Activate the plugin in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;... zsh-autosuggestions&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Restart your terminal to apply changes.&lt;/p&gt;

&lt;h2 id=&quot;ios-environment-install-xcode&quot;&gt;iOS Environment: Install Xcode&lt;/h2&gt;

&lt;h3 id=&quot;install-xcodes-tool&quot;&gt;Install Xcodes Tool&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;robotsandpencils/made/xcodes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;common-issue-1&quot;&gt;Common Issue&lt;/h3&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;error: terminated&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;72&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: /usr/bin/xcrun &lt;span class=&quot;nt&quot;&gt;--sdk&lt;/span&gt; macosx &lt;span class=&quot;nt&quot;&gt;--find&lt;/span&gt; xctest output:
    xcrun: error: unable to find utility &lt;span class=&quot;s2&quot;&gt;&quot;xctest&quot;&lt;/span&gt;, not a developer tool or &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;PATH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Refer to &lt;a href=&quot;https://github.com/RobotsAndPencils/xcodes/issues/148&quot;&gt;this GitHub issue&lt;/a&gt; for resolution.&lt;/p&gt;

&lt;h3 id=&quot;alternative-use-xcodesapp&quot;&gt;Alternative: Use XcodesApp&lt;/h3&gt;

&lt;p&gt;If issues persist, download Xcode via the &lt;a href=&quot;https://apps.apple.com/&quot;&gt;App Store&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;install-jetbrains-toolbox&quot;&gt;Install JetBrains Toolbox&lt;/h2&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--cask&lt;/span&gt; jetbrains-toolbox
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Use JetBrains Toolbox to manage IDEs like Android Studio, IntelliJ IDEA, and PyCharm.&lt;/p&gt;

&lt;h2 id=&quot;install-openjdk&quot;&gt;Install OpenJDK&lt;/h2&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;openjdk@11
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add OpenJDK to your PATH:&lt;/p&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;export PATH=&quot;/opt/homebrew/opt/openjdk@11/bin:$PATH&quot;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; ~/.zshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For compilers, set:&lt;/p&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;CPPFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-I/opt/homebrew/opt/openjdk@11/include&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ssh-key-setup&quot;&gt;SSH Key Setup&lt;/h2&gt;

&lt;p&gt;Create unique keys for each platform (e.g., GitHub, GitLab).&lt;/p&gt;

&lt;h3 id=&quot;github&quot;&gt;GitHub&lt;/h3&gt;

&lt;p&gt;Follow &lt;a href=&quot;https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent&quot;&gt;GitHubâ€™s guide&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;gitlab&quot;&gt;GitLab&lt;/h3&gt;

&lt;p&gt;Follow &lt;a href=&quot;http://10.1.2.150:53180/help/ssh/README&quot;&gt;GitLabâ€™s SSH setup guide&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;android-build-issue&quot;&gt;Android Build Issue&lt;/h2&gt;

&lt;div class=&quot;language-zsh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Caused by: java.lang.Exception: No native library is found &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;os.name&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Mac and os.arch&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;aarch64. &lt;span class=&quot;nv&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/org/sqlite/native/Mac/aarch64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Refer to &lt;a href=&quot;https://stackoverflow.com/questions/68884589/caused-by-java-lang-exception-no-native-library-is-found-for-os-name-mac-and-o&quot;&gt;this StackOverflow solution&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;ğŸ‰ Your macOS development environment setup is complete!&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Setup Guide" /><category term="macOS" /><category term="Development" /><category term="Mobile Development" /><summary type="html">Step-by-step guide to setting up a mobile development environment on a new macOS system.</summary></entry><entry><title type="html">Design Pattern (28) - Interpreter Pattern (è§£è­¯å™¨æ¨¡å¼)</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-28-interpreter-pattern/" rel="alternate" type="text/html" title="Design Pattern (28) - Interpreter Pattern (è§£è­¯å™¨æ¨¡å¼)" /><published>2024-12-29T08:30:00+00:00</published><updated>2024-12-29T08:30:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-28-interpreter-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-28-interpreter-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘éœ€è¦è¨­è¨ˆä¸€å€‹å¸ƒæ—é‹ç®—è§£è­¯ç³»çµ±ï¼Œå…·å‚™ä»¥ä¸‹åŠŸèƒ½ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;èƒ½è§£è­¯åŒ…å«å¸ƒæ—å€¼ã€AND é‹ç®—èˆ‡ OR é‹ç®—çš„è¡¨é”å¼ã€‚&lt;/li&gt;
  &lt;li&gt;ç¬¦åˆé–‹æ”¾é—œé–‰åŸå‰‡ï¼Œèƒ½å¤ æ–¹ä¾¿åœ°æ–°å¢å…¶ä»–é‹ç®—ï¼ˆå¦‚ NOTï¼‰ã€‚&lt;/li&gt;
  &lt;li&gt;ç³»çµ±çµæ§‹æ¸…æ™°ï¼Œæ˜“æ–¼ç¶­è­·èˆ‡æ“´å±•ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘åˆ†æ-ooa&quot;&gt;ç‰©ä»¶å°å‘åˆ†æ (OOA)&lt;/h2&gt;

&lt;p&gt;ç†è§£éœ€æ±‚å¾Œï¼Œè®“æˆ‘å€‘ä¾†å¿«é€Ÿå¯¦ä½œç‰©ä»¶å°å‘åˆ†æå§ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_interpreter_pattern_uml_1.png&quot; alt=&quot;interpreter_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å¯Ÿè¦º-forces&quot;&gt;å¯Ÿè¦º Forces&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;è¤‡é›œæ€§å¢åŠ &lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;éš¨è‘—é‹ç®—ç¬¦é¡å‹å¢åŠ ï¼Œæ‰‹å‹•è§£æé‚è¼¯æœƒè®Šå¾—é›£ä»¥ç¶­è­·ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é‡è¤‡ä»£ç¢¼&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;ä¸åŒé‹ç®—ç¬¦çš„è™•ç†å¯èƒ½å°è‡´é¡ä¼¼åŠŸèƒ½é‡è¤‡å¯¦ç¾ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é›£ä»¥æ“´å±•&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;æ–°å¢é‹ç®—ç¬¦éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç¢¼ï¼Œé•åé–‹æ”¾é—œé–‰åŸå‰‡ (OCP)ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;å¥—ç”¨-interpreter-pattern-solution-å¾—åˆ°æ–°çš„-context-resulting-context&quot;&gt;å¥—ç”¨ Interpreter Pattern (Solution) å¾—åˆ°æ–°çš„ Context (Resulting Context)&lt;/h2&gt;

&lt;p&gt;åšå®Œ OOAï¼Œå¯Ÿè¦º Forcesï¼Œçœ‹æ¸…æ¥šæ•´å€‹ Context å¾Œï¼Œå°±å¯ä»¥ä¾†å¥—ç”¨ Interpreter Pattern è§£æ±ºé€™å€‹å•é¡Œã€‚&lt;/p&gt;

&lt;p&gt;å…ˆä¾†çœ‹ä¸€ä¸‹ Interpreter Pattern çš„ UML&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_interpreter_pattern_uml_2.png&quot; alt=&quot;interpreter_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;interrepter-pattern-çš„çµ„ä»¶&quot;&gt;Interrepter Pattern çš„çµ„ä»¶&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;å»ºç«‹æŠ½è±¡è¡¨é”å¼ (Expression)&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;å®šç¾©æ‰€æœ‰è¡¨é”å¼çš„é€šç”¨ä»‹é¢ï¼Œç¢ºä¿ä¸åŒé¡å‹çš„è¡¨é”å¼å¯ä»¥è¢«çµ±ä¸€è™•ç†ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;è¨­è¨ˆçµ‚ç«¯è¡¨é”å¼ (Terminal Expression)&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;è² è²¬è™•ç†èªæ³•ä¸­çš„åŸºæœ¬å–®ä½ï¼ˆå¦‚å¸ƒæ—å€¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;false&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;è¨­è¨ˆéçµ‚ç«¯è¡¨é”å¼ (Non-Terminal Expression)&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;è¡¨ç¤ºè¤‡é›œé‹ç®—çš„çµ„åˆï¼ˆå¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AND&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OR&lt;/code&gt;ï¼‰ï¼Œéè¿´è™•ç†å­è¡¨é”å¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç‚ºäº†è§£æ±ºä¸Šè¿°å•é¡Œï¼Œæˆ‘å€‘æ¡ç”¨è§£è­¯å™¨æ¨¡å¼ä¾†å»ºæ§‹å¸ƒæ—é‹ç®—ç³»çµ±ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯å°‡æ¯å€‹é‹ç®—ç¬¦èˆ‡æ“ä½œæ•¸ä½œç‚ºä¸€å€‹ â€œè¡¨é”å¼â€ï¼Œä¸¦ä½¿ç”¨éè¿´çš„æ–¹å¼é€²è¡Œè§£è­¯ã€‚&lt;/p&gt;

&lt;p&gt;é€éé€™ç¨®æ–¹å¼ï¼Œæˆ‘å€‘å¯ä»¥å°‡è¤‡é›œçš„å¸ƒæ—é‹ç®—æ‹†è§£ç‚ºå¤šå€‹å°å‹ä¸”å¯çµ„åˆçš„å–®å…ƒï¼Œä¸¦ä¿æŒç³»çµ±çµæ§‹çš„éˆæ´»æ€§ã€‚&lt;/p&gt;

&lt;p&gt;å°‡ Interpreter Pattern å¥—ç”¨åˆ°æˆ‘å€‘çš„æ‡‰ç”¨å§&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_interpreter_pattern_uml_3.png&quot; alt=&quot;interpreter_pattern_uml_3&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ-oop&quot;&gt;ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ (OOP)&lt;/h2&gt;

&lt;p&gt;[æŠ½è±¡è¡¨é”å¼: Expression]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;interpret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[çµ‚ç«¯è¡¨é”å¼: BooleanValue]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BooleanValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;interpret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[éçµ‚ç«¯è¡¨é”å¼: AndExpression, OrExpression]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AndExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;interpret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;interpret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;interpret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;OrExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;interpret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;interpret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;interpret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[å®¢æˆ¶ç«¯ä»£ç¢¼: Client]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// å®šç¾©å¸ƒæ—è¡¨é”å¼ï¼štrue AND false OR true&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;expression&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;OrExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;AndExpression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;BooleanValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;BooleanValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;BooleanValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è¨ˆç®—çµæœ&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;interpret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Result of the expression is: $result&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Output]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expression&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;çµè«–&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;é€éè§£è­¯å™¨æ¨¡å¼ï¼Œæˆ‘å€‘æˆåŠŸè§£æ±ºäº†å¸ƒæ—é‹ç®—ç³»çµ±çš„è¨­è¨ˆæŒ‘æˆ°ï¼Œä¸¦å¯¦ç¾ä»¥ä¸‹å„ªå‹¢ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;çµæ§‹æ¸…æ™°&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;å°‡æ¯å€‹é‹ç®—ç¬¦å’Œæ“ä½œæ•¸å°è£æˆè¡¨é”å¼é¡åˆ¥ï¼Œä¾¿æ–¼çµ„åˆèˆ‡ç®¡ç†ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;æ˜“æ–¼æ“´å±•&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;æ–°å¢é‹ç®—ç¬¦åªéœ€å¯¦ç¾æ–°çš„è¡¨é”å¼é¡åˆ¥ï¼Œç¬¦åˆé–‹æ”¾é—œé–‰åŸå‰‡ (OCP)ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;éˆæ´»æ€§é«˜&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;æ”¯æŒå‹•æ…‹æ§‹å»ºèˆ‡è§£è­¯è¤‡é›œè¡¨é”å¼ï¼Œé©ç”¨æ–¼å¤šç¨®é‹ç®—å ´æ™¯ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè§£è­¯å™¨æ¨¡å¼æ›´é©åˆè™•ç†çµæ§‹ç°¡å–®çš„èªæ³•ã€‚å¦‚æœèªæ³•éæ–¼è¤‡é›œï¼Œå¯èƒ½å°è‡´é¡åˆ¥æ•¸é‡æ¿€å¢ï¼Œé€™æ™‚å¯ä»¥è€ƒæ…®çµåˆå…¶ä»–æ¨¡å¼ï¼ˆå¦‚çµ„åˆæ¨¡å¼æˆ–è¨ªå•è€…æ¨¡å¼ï¼‰é€²è¡Œå„ªåŒ–ã€‚&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Interpreter Pattern" /><summary type="html">è§£è­¯å™¨æ¨¡å¼ç”¨æ–¼æ§‹å»ºä¸€å€‹å¯è§£è®€ç‰¹å®šèªè¨€æˆ–èªæ³•çš„ç³»çµ±ï¼Œé©åˆæ–¼è™•ç†è¤‡é›œçš„è¦å‰‡åˆ¤æ–·æˆ–æŒ‡ä»¤èªæ³•ã€‚</summary></entry><entry><title type="html">Design Pattern (27) - Visitor Pattern (è¨ªå•è€…æ¨¡å¼)</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-27-visitor-pattern/" rel="alternate" type="text/html" title="Design Pattern (27) - Visitor Pattern (è¨ªå•è€…æ¨¡å¼)" /><published>2024-12-28T13:30:00+00:00</published><updated>2024-12-28T13:30:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-27-visitor-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-27-visitor-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h2&gt;

&lt;p&gt;åœ¨è¨­è¨ˆä¸€å€‹ &lt;strong&gt;IoT App æ•´åˆå¤šå“ç‰Œ IPCam çš„åŠŸèƒ½&lt;/strong&gt; æ™‚ï¼Œæˆ‘å€‘éœ€è¦æ»¿è¶³ä»¥ä¸‹éœ€æ±‚ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ”¯æ´å¤šç¨® IPCam å“ç‰Œï¼Œé€™äº›å“ç‰Œçš„ IPCam æä¾›ä¸åŒçš„ä¸²æµèˆ‡æˆªåœ–æ–¹å¼ï¼š
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;HIKVISION&lt;/strong&gt; æä¾› RTSP å”å®šï¼Œå¯ä»¥ç”¨é€šç”¨æ–¹å¼æ’­æ”¾ä¸²æµèˆ‡æˆªåœ–ã€‚&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;DAHUA&lt;/strong&gt; æä¾›è‡ªå®¶ SDKï¼Œéœ€è¦ä¾è³´ SDK æä¾›çš„æ–¹æ³•é€²è¡Œæ“ä½œã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;App çš„ç¨‹å¼ç¢¼çµæ§‹ä¸æ‡‰ä¾è³´ IPCam å“ç‰Œçš„å¯¦ç¾ç´°ç¯€&lt;/strong&gt;ï¼Œæ‡‰ä¿æŒé–‹æ”¾æ“´å±•æ€§ï¼Œæ–¹ä¾¿å¾ŒçºŒæ–°å¢æ–°çš„ IPCam å“ç‰Œã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;é¿å…ä¿®æ”¹ IPCam çš„æ ¸å¿ƒçµæ§‹&lt;/strong&gt;ï¼Œå› ç‚ºé€™äº›å“ç‰Œçš„å¯¦ç¾é€šå¸¸ç”±å» å•†æä¾›ï¼Œç„¡æ³•ç›´æ¥ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘åˆ†æ-ooa&quot;&gt;ç‰©ä»¶å°å‘åˆ†æ (OOA)&lt;/h2&gt;

&lt;p&gt;ç†è§£éœ€æ±‚å¾Œï¼Œè®“æˆ‘å€‘ä¾†å¿«é€Ÿå¯¦ä½œç‰©ä»¶å°å‘åˆ†æå§ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_visitor_pattern_uml_1.png&quot; alt=&quot;visitor_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å¯Ÿè¦º-forces&quot;&gt;å¯Ÿè¦º Forces&lt;/h3&gt;

&lt;p&gt;å¦‚æœæœªå¥—ç”¨è¨­è¨ˆæ¨¡å¼ï¼Œæˆ‘å€‘å¯èƒ½æœƒé‡åˆ°ä»¥ä¸‹å•é¡Œï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;é›£ä»¥æ“´å±•æ–°å“ç‰Œ&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;æ¯æ–°å¢ä¸€å€‹å“ç‰Œçš„ IPCamï¼Œå°±éœ€è¦ä¿®æ”¹ App çš„æ ¸å¿ƒé‚è¼¯ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;é•åé–‹æ”¾é—œé–‰åŸå‰‡ (OCP)&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;æ ¸å¿ƒé‚è¼¯èˆ‡å“ç‰Œå¯¦ç¾ç´°ç¯€è€¦åˆï¼Œæ–°å¢åŠŸèƒ½éœ€è¦ä¿®æ”¹æ ¸å¿ƒç¨‹å¼ç¢¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ç„¡æ³•çµ±ä¸€è™•ç†ä¸åŒå“ç‰Œçš„æ“ä½œ&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;æ¯å€‹å“ç‰Œçš„ä¸²æµèˆ‡æˆªåœ–æ–¹å¼ä¸åŒï¼Œå°è‡´ç¨‹å¼ç¢¼æ··äº‚ï¼Œé›£ä»¥ç¶­è­·ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;å¥—ç”¨-visitor-pattern-solution-å¾—åˆ°æ–°çš„-context-resulting-context&quot;&gt;å¥—ç”¨ Visitor Pattern (Solution) å¾—åˆ°æ–°çš„ Context (Resulting Context)&lt;/h2&gt;

&lt;p&gt;åšå®Œ OOAï¼Œå¯Ÿè¦º Forcesï¼Œçœ‹æ¸…æ¥šæ•´å€‹ Context å¾Œï¼Œå°±å¯ä»¥ä¾†å¥—ç”¨ Visitor Pattern è§£æ±ºé€™å€‹å•é¡Œã€‚&lt;/p&gt;

&lt;p&gt;å…ˆä¾†çœ‹ä¸€ä¸‹ Visitor Pattern çš„ UML&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_visitor_pattern_uml_2.png&quot; alt=&quot;visitor_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;visitor-pattern-çš„çµ„ä»¶&quot;&gt;Visitor Pattern çš„çµ„ä»¶&lt;/h3&gt;

&lt;p&gt;è¨ªå•è€…æ¨¡å¼çš„æ ¸å¿ƒçµ„ä»¶åŒ…æ‹¬ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Visitor (è¨ªå•è€…ä»‹é¢)&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;å®šç¾©å°æ¯ç¨®é¡å‹ç‰©ä»¶çš„æ“ä½œæ–¹æ³•ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ConcreteVisitor (å…·é«”è¨ªå•è€…)&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;å¯¦ç¾ç‰¹å®šæ“ä½œé‚è¼¯ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Element (å…ƒç´ ä»‹é¢)&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;å®šç¾©æ¥å—è¨ªå•è€…çš„æ–¹æ³• (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;accept&lt;/code&gt;)ï¼Œä¸¦å°‡è¨ªå•è€…å‚³éçµ¦è‡ªå·±ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ConcreteElement (å…·é«”å…ƒç´ )&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;å¯¦ç¾æ¥å—è¨ªå•è€…çš„æ–¹æ³•ï¼Œè®“è¨ªå•è€…èƒ½å¤ è¨ªå•ä¸¦æ“ä½œå…·é«”å…ƒç´ ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å°‡ Visitor Pattern å¥—ç”¨åˆ°æˆ‘å€‘çš„æ‡‰ç”¨å§&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_visitor_pattern_uml_3.png&quot; alt=&quot;visitor_pattern_uml_3&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘è¨­è¨ˆ-oop&quot;&gt;ç‰©ä»¶å°å‘è¨­è¨ˆ (OOP)&lt;/h2&gt;

&lt;p&gt;[Element: IPCam]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCam&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamVisitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[ConcreteElements: HikvisionIPCam, DahuaIPCam]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HikvisionIPCam&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCam&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamVisitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;visitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;visitHikvision&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getRTSPStream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;rtsp://hikvision/stream&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;captureSnapshot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Hikvision Snapshot&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DahuaIPCam&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCam&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;visitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamVisitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;visitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;visitDahua&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;startSDKStream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Dahua SDK Stream&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;takeSDKSnapshot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Dahua Snapshot&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Visitor: IPCamVisitor]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamVisitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;visitHikvision&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ipCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HikvisionIPCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;visitDahua&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ipCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DahuaIPCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[ConcreteVisitors: IPCamStreamingVisitor, IPCamSnapshotVisitor]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamStreamingVisitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamVisitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;visitHikvision&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ipCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HikvisionIPCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Streaming: ${ipCam.getRTSPStream()}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;visitDahua&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ipCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DahuaIPCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Streaming: ${ipCam.startSDKStream()}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamSnapshotVisitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamVisitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;visitHikvision&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ipCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HikvisionIPCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Snapshot: ${ipCam.captureSnapshot()}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;visitDahua&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ipCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DahuaIPCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Snapshot: ${ipCam.takeSDKSnapshot()}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Client]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;ipCams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;IPCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HikvisionIPCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DahuaIPCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;streamingVisitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamStreamingVisitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;snapshotVisitor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPCamSnapshotVisitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ipCam&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ipCams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ipCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;streamingVisitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ipCam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;snapshotVisitor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Output]&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Streaming: rtsp://hikvision/stream
Snapshot: Hikvision Snapshot
Streaming: Dahua SDK Stream
Snapshot: Dahua Snapshot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;çµè«–&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;é€é Visitor Patternï¼Œæˆ‘å€‘æˆåŠŸå°‡ä¸åŒå“ç‰Œ IPCam çš„æ“ä½œé‚è¼¯èˆ‡ç‰©ä»¶çµæ§‹åˆ†é›¢ï¼Œä¸¦å¯¦ç¾ä»¥ä¸‹å„ªå‹¢ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;æ˜“æ–¼æ“´å±•æ–°å“ç‰Œ&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;æ–°å¢å“ç‰Œåªéœ€å¯¦ä½œæ–°çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ConcreteElement&lt;/code&gt; é¡åˆ¥ï¼Œä¸¦åœ¨è¨ªå•è€…ä¸­æ–°å¢ç›¸æ‡‰çš„æ“ä½œæ–¹æ³•ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;æ“ä½œé‚è¼¯é›†ä¸­&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;ä¸åŒå“ç‰Œçš„æ“ä½œé‚è¼¯é›†ä¸­æ–¼è¨ªå•è€…ä¸­ï¼Œä¾¿æ–¼ç¶­è­·èˆ‡ç®¡ç†ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ç¬¦åˆè¨­è¨ˆåŸå‰‡&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;å–®ä¸€è·è²¬åŸå‰‡ (SRP)ï¼šæ“ä½œé‚è¼¯èˆ‡ç‰©ä»¶çµæ§‹åˆ†é›¢ã€‚&lt;/li&gt;
      &lt;li&gt;é–‹æ”¾é—œé–‰åŸå‰‡ (OCP)ï¼šå…è¨±æ–°å¢åŠŸèƒ½è€Œä¸ä¿®æ”¹æ—¢æœ‰ç¨‹å¼ç¢¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¨ªå•è€…æ¨¡å¼éå¸¸é©åˆè™•ç†ä»¥ä¸‹å ´æ™¯ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å¤šç¨®é¡å‹ç‰©ä»¶éœ€è¦åŸ·è¡Œä¸åŒæ“ä½œã€‚&lt;/li&gt;
  &lt;li&gt;ç‰©ä»¶çµæ§‹ç©©å®šï¼Œä½†æ“ä½œé‚è¼¯ç¶“å¸¸è®ŠåŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¨ªå•è€…æ¨¡å¼ç‚ºå¤šè®Šæ“ä½œæä¾›äº†ä¸€å€‹å„ªé›…çš„è§£æ±ºæ–¹æ¡ˆï¼Œç¢ºä¿ç³»çµ±å…·æœ‰é«˜æ“´å±•æ€§èˆ‡éˆæ´»æ€§ã€‚&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Visitor Pattern" /><summary type="html">è¨ªå•è€…æ¨¡å¼æä¾›äº†ä¸€ç¨®æ–¹å¼ï¼Œè®“æˆ‘å€‘èƒ½åœ¨ä¸ä¿®æ”¹ç‰©ä»¶çµæ§‹çš„å‰æä¸‹ï¼Œç‚ºå…¶å¢åŠ æ–°çš„æ“ä½œé‚è¼¯ï¼Œå¯¦ç¾é«˜æ“´å±•æ€§ã€‚</summary></entry><entry><title type="html">Design Pattern (26) - Template Method Pattern (æ¨¡æ¿æ–¹æ³•æ¨¡å¼)</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-26-template-method-pattern/" rel="alternate" type="text/html" title="Design Pattern (26) - Template Method Pattern (æ¨¡æ¿æ–¹æ³•æ¨¡å¼)" /><published>2024-12-28T11:30:00+00:00</published><updated>2024-12-28T11:30:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-26-template-method-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-26-template-method-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h2&gt;

&lt;p&gt;åœ¨è¨­è¨ˆä¸€å€‹ &lt;strong&gt;è³‡æ–™æ ¼å¼è½‰æ›ç³»çµ±&lt;/strong&gt; æ™‚ï¼Œæˆ‘å€‘éœ€è¦æ»¿è¶³ä»¥ä¸‹éœ€æ±‚ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ”¯æ´å¤šç¨®æ ¼å¼è½‰æ›ï¼Œä¾‹å¦‚ï¼š
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;JSON æ ¼å¼è½‰æ›&lt;/strong&gt;ï¼šå°‡è³‡æ–™è½‰æ›ç‚º JSON æ ¼å¼ã€‚&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;XML æ ¼å¼è½‰æ›&lt;/strong&gt;ï¼šå°‡è³‡æ–™è½‰æ›ç‚º XML æ ¼å¼ã€‚&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;CSV æ ¼å¼è½‰æ›&lt;/strong&gt;ï¼šå°‡è³‡æ–™è½‰æ›ç‚º CSV æ ¼å¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ç³»çµ±éœ€å…·å‚™è‰¯å¥½çš„æ“´å±•æ€§ï¼š
    &lt;ul&gt;
      &lt;li&gt;èƒ½å¤ æ–¹ä¾¿åœ°æ–°å¢æ–°çš„æ ¼å¼è½‰æ›æ–¹å¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ä¿æŒè½‰æ›æµç¨‹æ ¸å¿ƒä¸€è‡´æ€§&lt;/strong&gt;ï¼Œä¾‹å¦‚ï¼š
    &lt;ul&gt;
      &lt;li&gt;æ‰€æœ‰æ ¼å¼è½‰æ›éƒ½éœ€è¦ï¼šè®€å–è³‡æ–™ã€æ ¼å¼åŒ–è³‡æ–™ã€è¼¸å‡ºè³‡æ–™ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;é¿å…é‡è¤‡ç¨‹å¼ç¢¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘åˆ†æ-ooa&quot;&gt;ç‰©ä»¶å°å‘åˆ†æ (OOA)&lt;/h2&gt;

&lt;p&gt;ç†è§£éœ€æ±‚å¾Œï¼Œè®“æˆ‘å€‘ä¾†å¿«é€Ÿå¯¦ä½œç‰©ä»¶å°å‘åˆ†æå§!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_template_method_pattern_uml_1.png&quot; alt=&quot;template_method_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å¯Ÿè¦º-forces&quot;&gt;å¯Ÿè¦º Forces&lt;/h3&gt;

&lt;p&gt;å¦‚æœæœªå¥—ç”¨è¨­è¨ˆæ¨¡å¼ï¼Œæˆ‘å€‘å¯èƒ½æœƒé‡åˆ°ä»¥ä¸‹å•é¡Œï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;ç¨‹å¼ç¢¼é‡è¤‡&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;æ¯ç¨®æ ¼å¼çš„è½‰æ›é‚è¼¯ä¸­åŒ…å«ç›¸åŒæ­¥é©Ÿï¼Œä½†è¢«å¤šæ¬¡é‡è¤‡å¯¦ä½œã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;é•åé–‹æ”¾é—œé–‰åŸå‰‡ (OCP)&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;æ–°å¢æ ¼å¼éœ€è¦ä¿®æ”¹æ ¸å¿ƒè½‰æ›é‚è¼¯ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;é›£ä»¥ç¶­è­·èˆ‡æ“´å±•&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;å„æ ¼å¼è½‰æ›é‚è¼¯åˆ†æ•£ï¼Œé›£ä»¥çµ±ä¸€ç®¡ç†èˆ‡ä¿®æ”¹ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;å¥—ç”¨-template-method-pattern-solution-å¾—åˆ°æ–°çš„-context-resulting-context&quot;&gt;å¥—ç”¨ Template Method Pattern (Solution) å¾—åˆ°æ–°çš„ Context (Resulting Context)&lt;/h2&gt;

&lt;p&gt;åšå®Œ OOAï¼Œå¯Ÿè¦º Forcesï¼Œçœ‹æ¸…æ¥šæ•´å€‹ Context å¾Œï¼Œå°±å¯ä»¥ä¾†å¥—ç”¨ Template Method Pattern è§£æ±ºé€™å€‹å•é¡Œã€‚&lt;/p&gt;

&lt;p&gt;å…ˆä¾†çœ‹ä¸€ä¸‹ Template Method Pattern çš„ UML&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_template_method_pattern_uml_2.png&quot; alt=&quot;template_method_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;template-method-pattern-çš„çµ„ä»¶&quot;&gt;Template Method Pattern çš„çµ„ä»¶&lt;/h3&gt;

&lt;p&gt;æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒçµ„ä»¶åŒ…æ‹¬ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;AbstractClass (æŠ½è±¡é¡åˆ¥)&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;å®šç¾©æ¨¡æ¿æ–¹æ³• (Template Method)ï¼Œå°è£æ ¸å¿ƒæµç¨‹ã€‚&lt;/li&gt;
      &lt;li&gt;æä¾›éƒ¨åˆ†æ­¥é©Ÿçš„é è¨­å¯¦ä½œï¼Œæˆ–å°‡å…¶æ¨™è¨˜ç‚ºæŠ½è±¡ï¼Œç”±å­é¡åˆ¥å¯¦ç¾ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ConcreteClass (å…·é«”é¡åˆ¥)&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;ç¹¼æ‰¿æŠ½è±¡é¡åˆ¥ï¼Œå¯¦ç¾å…·é«”æ­¥é©Ÿã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯ Template Method Pattern çš„ UML åœ–ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_template_method_pattern_uml_3.png&quot; alt=&quot;template_method_pattern_uml_3&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘è¨­è¨ˆ-oop&quot;&gt;ç‰©ä»¶å°å‘è¨­è¨ˆ (OOP)&lt;/h2&gt;

&lt;p&gt;[AbstractClass: DataFormatter]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DataFormatter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;convert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;rawData&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;readData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;formattedData&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;formatData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rawData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;outputData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formattedData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;readData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// subclass implementation&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;formatData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;outputData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[ConcreteClasses: JsonFormatter, XmlFormatter, CsvFormatter]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;JsonFormatter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DataFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;formatData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;{\&quot;data\&quot;: \&quot;$data\&quot;}&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ¨¡æ“¬ JSON æ ¼å¼åŒ–&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;outputData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;JSON Output: $data&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;XmlFormatter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DataFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;formatData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;data&amp;gt;$data&amp;lt;/data&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ¨¡æ“¬ XML æ ¼å¼åŒ–&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;outputData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;XML Output: $data&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CsvFormatter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DataFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;formatData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;, &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\n&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ¨¡æ“¬ CSV æ ¼å¼åŒ–&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;outputData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;CSV Output: $data&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Client]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;mapOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;John&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;age&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;city&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;New York&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;jsonFormatter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;JsonFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jsonFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;convert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;xmlFormatter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;XmlFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xmlFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;convert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;csvFormatter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CsvFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;csvFormatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;convert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Output]&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;JSON Output: {&quot;data&quot;: &quot;{name=John, age=30, city=New York}&quot;}
XML Output: &amp;lt;data&amp;gt;{name=John, age=30, city=New York}&amp;lt;/data&amp;gt;
CSV Output: name=John\nage=30\ncity=New York
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;çµè«–&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;é€é Template Method Patternï¼Œæˆ‘å€‘æˆåŠŸå°‡è³‡æ–™æ ¼å¼è½‰æ›çš„é€šç”¨é‚è¼¯èˆ‡è®ŠåŒ–é‚è¼¯åˆ†é›¢ï¼Œä¸¦å¯¦ç¾ä»¥ä¸‹å„ªå‹¢ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ç¨‹å¼ç¢¼å¾©ç”¨æ€§é«˜&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;é€šç”¨çš„è½‰æ›æµç¨‹é‚è¼¯åœ¨æŠ½è±¡é¡åˆ¥ä¸­å¯¦ç¾ï¼Œé¿å…é‡è¤‡ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;æ˜“æ–¼æ“´å±•&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;æ–°å¢æ ¼å¼åªéœ€ç¹¼æ‰¿æŠ½è±¡é¡åˆ¥ä¸¦å¯¦ç¾ç‰¹å®šæ­¥é©Ÿã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ç¬¦åˆè¨­è¨ˆåŸå‰‡&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;å–®ä¸€è·è²¬åŸå‰‡ (SRP)ï¼šæ ¸å¿ƒæµç¨‹èˆ‡ç‰¹å®šé‚è¼¯åˆ†é›¢ã€‚&lt;/li&gt;
      &lt;li&gt;é–‹æ”¾é—œé–‰åŸå‰‡ (OCP)ï¼šå…è¨±æ–°å¢åŠŸèƒ½è€Œä¸ä¿®æ”¹æ—¢æœ‰ç¨‹å¼ç¢¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ¨¡æ¿æ–¹æ³•æ¨¡å¼éå¸¸é©åˆè™•ç†ä»¥ä¸‹å ´æ™¯ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸åŒçš„è³‡æ–™æ ¼å¼è½‰æ›æµç¨‹ã€‚&lt;/li&gt;
  &lt;li&gt;æ–‡æª”ç”Ÿæˆæµç¨‹ (ä¾‹å¦‚ï¼šPDFã€Excel)ã€‚&lt;/li&gt;
  &lt;li&gt;å¤šç¨®è³‡æ–™è™•ç†çš„éç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç¢ºä¿ç³»çµ±æ ¸å¿ƒæµç¨‹çš„ä¸€è‡´æ€§ï¼Œç‚ºå¯¦ç¾éˆæ´»ä¸”é«˜æ•ˆçš„æ“´å±•æä¾›äº†ä¸€å€‹å„ªé›…çš„è§£æ±ºæ–¹æ¡ˆã€‚&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Template Method Pattern" /><summary type="html">æ¨¡æ¿æ–¹æ³•æ¨¡å¼æä¾›äº†ä¸€å€‹æ¡†æ¶ï¼Œå…è¨±å­é¡åˆ¥é‡æ–°å®šç¾©ç‰¹å®šæ­¥é©Ÿçš„å¯¦ä½œï¼Œä¿æŒæ ¸å¿ƒæµç¨‹çš„ä¸€è‡´æ€§ï¼Œå¯¦ç¾é«˜å¾©ç”¨æ€§èˆ‡éˆæ´»æ€§ã€‚</summary></entry><entry><title type="html">Design Pattern (25) - Strategy Pattern (ç­–ç•¥æ¨¡å¼)</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-25-strategy-pattern/" rel="alternate" type="text/html" title="Design Pattern (25) - Strategy Pattern (ç­–ç•¥æ¨¡å¼)" /><published>2024-12-26T15:50:00+00:00</published><updated>2024-12-26T15:50:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-25-strategy-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-25-strategy-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h2&gt;

&lt;p&gt;åœ¨è¨­è¨ˆä¸€å€‹ &lt;strong&gt;é›»å•†é‹è²»è¨ˆç®—ç³»çµ±&lt;/strong&gt; æ™‚ï¼Œæˆ‘å€‘éœ€è¦æ»¿è¶³ä»¥ä¸‹éœ€æ±‚ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ”¯æ´å¤šç¨®é‹è²»è¨ˆç®—æ–¹å¼ï¼Œä¾‹å¦‚ï¼š
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;ä¸€èˆ¬é…é€&lt;/strong&gt;ï¼šå›ºå®šé‹è²»ã€‚&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;å¿«é€Ÿé…é€&lt;/strong&gt;ï¼šä¾é‡é‡è¨ˆè²»ã€‚&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;åœ‹éš›é…é€&lt;/strong&gt;ï¼šæ ¹æ“šåœ°å€èˆ‡é‡é‡è¨ˆè²»ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ç³»çµ±éœ€å…·å‚™è‰¯å¥½çš„æ“´å±•æ€§ï¼š
    &lt;ul&gt;
      &lt;li&gt;èƒ½å¤ æ–¹ä¾¿åœ°æ–°å¢æ–°çš„é‹è²»è¨ˆç®—æ–¹å¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;é¿å…ä½¿ç”¨å¤§é‡çš„ if-else æˆ– switch-case&lt;/strong&gt;ã€‚&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨è€…æ‡‰èƒ½è¼•é¬†åˆ‡æ›é‹è²»è¨ˆç®—æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘åˆ†æ-ooa&quot;&gt;ç‰©ä»¶å°å‘åˆ†æ (OOA)&lt;/h2&gt;

&lt;p&gt;ç†è§£éœ€æ±‚å¾Œï¼Œè®“æˆ‘å€‘ä¾†å¿«é€Ÿå¯¦ä½œç‰©ä»¶å°å‘åˆ†æå§!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_strategy_pattern_uml_1.png&quot; alt=&quot;strategy_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å¯Ÿè¦º-forces&quot;&gt;å¯Ÿè¦º Forces&lt;/h3&gt;

&lt;p&gt;å¦‚æœæœªå¥—ç”¨è¨­è¨ˆæ¨¡å¼ï¼Œæˆ‘å€‘å¯èƒ½æœƒé‡åˆ°ä»¥ä¸‹å•é¡Œï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é›£ä»¥ç¶­è­·&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;é‹è²»è¨ˆç®—é‚è¼¯æ··é›œåœ¨ä¸»ç¨‹å¼å…§ï¼Œæ–°å¢æˆ–ä¿®æ”¹ä¸€ç¨®è¨ˆç®—æ–¹å¼å¯èƒ½æœƒå½±éŸ¿å…¶ä»–éƒ¨åˆ†ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é•åé–‹æ”¾é—œé–‰åŸå‰‡ (OCP)&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;æ¯æ¬¡æ–°å¢é‹è²»è¨ˆç®—æ–¹å¼éƒ½éœ€ä¿®æ”¹æ ¸å¿ƒæ¥­å‹™é‚è¼¯ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é•åå–®ä¸€è·è²¬åŸå‰‡ (SRP)&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;ä¸»ç¨‹å¼åŒæ™‚è² è²¬é‹è²»è¨ˆç®—èˆ‡æ ¸å¿ƒæ¥­å‹™é‚è¼¯ï¼Œè²¬ä»»éæ–¼ç¹é‡ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;å¥—ç”¨-strategy-pattern-solution-å¾—åˆ°æ–°çš„-context-resulting-context&quot;&gt;å¥—ç”¨ Strategy Pattern (Solution) å¾—åˆ°æ–°çš„ Context (Resulting Context)&lt;/h2&gt;

&lt;p&gt;åšå®Œ OOAï¼Œå¯Ÿè¦º Forcesï¼Œçœ‹æ¸…æ¥šæ•´å€‹ Context å¾Œï¼Œå°±å¯ä»¥ä¾†å¥—ç”¨ Strategy Pattern è§£æ±ºé€™å€‹å•é¡Œ&lt;/p&gt;

&lt;p&gt;å…ˆä¾†çœ‹ä¸€ä¸‹ Strategy Pattern çš„ UML&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_strategy_pattern_uml_2.png&quot; alt=&quot;strategy_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;strategy-pattern-çš„çµ„ä»¶&quot;&gt;Strategy Pattern çš„çµ„ä»¶&lt;/h3&gt;

&lt;p&gt;ç­–ç•¥æ¨¡å¼çš„æ ¸å¿ƒçµ„ä»¶åŒ…æ‹¬ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Strategy (ç­–ç•¥ä»‹é¢)&lt;/strong&gt;&lt;br /&gt;
å®šç¾©æ‰€æœ‰ç­–ç•¥éœ€è¦å¯¦ç¾çš„è¡Œç‚ºã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ConcreteStrategy (å…·é«”ç­–ç•¥)&lt;/strong&gt;&lt;br /&gt;
æ¯å€‹å…·é«”ç­–ç•¥é¡åˆ¥å¯¦ç¾ç‰¹å®šçš„è¡Œç‚ºé‚è¼¯ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Context (ä¸Šä¸‹æ–‡)&lt;/strong&gt;&lt;br /&gt;
ç¶­è­·ä¸€å€‹ç­–ç•¥ç‰©ä»¶ï¼Œä¸¦æ ¹æ“šç•¶å‰ç­–ç•¥åŸ·è¡Œå°æ‡‰è¡Œç‚ºã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å°‡ Strategy Pattern å¥—ç”¨åˆ°æˆ‘å€‘çš„æ‡‰ç”¨å§&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_strategy_pattern_uml_3.png&quot; alt=&quot;strategy_pattern_uml_3&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘è¨­è¨ˆ-oop&quot;&gt;ç‰©ä»¶å°å‘è¨­è¨ˆ (OOP)&lt;/h2&gt;

&lt;p&gt;[Strategy: ShippingStrategy]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ShippingStrategy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calculateShippingCost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[ConcreteStrategies: RegularShipping, ExpressShipping, InternationalShipping]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RegularShipping&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ShippingStrategy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calculateShippingCost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;50.0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å›ºå®šé‹è²»&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExpressShipping&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ShippingStrategy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calculateShippingCost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ¯å…¬æ–¤ 10 å…ƒ&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;InternationalShipping&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ShippingStrategy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calculateShippingCost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;regionMultiplier&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;Asia&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;Europe&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;America&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;regionMultiplier&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Context: ShippingCalculator]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ShippingCalculator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ShippingStrategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setStrategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ShippingStrategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strategy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strategy&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calculateCost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;calculateShippingCost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Client]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;calculator&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ShippingCalculator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RegularShipping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ä¸€èˆ¬é…é€é‹è²»: ${calculator.calculateCost(5.0, &quot;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Asia&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;)} å…ƒ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å›ºå®š 50 å…ƒ&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;calculator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setStrategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ExpressShipping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;å¿«é€Ÿé…é€é‹è²»: ${calculator.calculateCost(5.0, &quot;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Asia&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;)} å…ƒ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 5.0 * 10 = 50 å…ƒ&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;calculator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setStrategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;InternationalShipping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;åœ‹éš›é…é€é‹è²» (Asia): ${calculator.calculateCost(5.0, &quot;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Asia&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;)} å…ƒ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 5.0 * 15 = 75 å…ƒ&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Output]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;ä¸€èˆ¬é…é€é‹è²»&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;50.0&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å…ƒ&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;å¿«é€Ÿé…é€é‹è²»&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;50.0&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å…ƒ&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;åœ‹éš›é…é€é‹è²»&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Asia&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;75.0&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å…ƒ&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;çµè«–&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;é€é Strategy Patternï¼Œæˆ‘å€‘æˆåŠŸå°‡é‹è²»è¨ˆç®—é‚è¼¯èˆ‡æ ¸å¿ƒåŠŸèƒ½åˆ†é›¢ï¼Œä¸¦å¯¦ç¾ä»¥ä¸‹å„ªå‹¢ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ˜“æ–¼æ“´å±•&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;æ–°å¢é‹è²»è¨ˆç®—æ–¹å¼åªéœ€å¯¦ä½œæ–°çš„ç­–ç•¥é¡åˆ¥ï¼Œç„¡éœ€ä¿®æ”¹ç¾æœ‰ç¨‹å¼ç¢¼ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;ä½è€¦åˆæ€§&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;é‹è²»è¨ˆç®—é‚è¼¯èˆ‡æ ¸å¿ƒæ¥­å‹™é‚è¼¯åˆ†é›¢ï¼Œå„è‡ªè² è²¬è‡ªå·±çš„åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;ç¬¦åˆè¨­è¨ˆåŸå‰‡&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;å–®ä¸€è·è²¬åŸå‰‡ (SRP)ï¼šæ¯å€‹ç­–ç•¥é¡åˆ¥å°ˆæ³¨æ–¼ç‰¹å®šé‹è²»è¨ˆç®—é‚è¼¯ã€‚&lt;/li&gt;
  &lt;li&gt;é–‹æ”¾é—œé–‰åŸå‰‡ (OCP)ï¼šç­–ç•¥æ¨¡å¼å…è¨±åœ¨ä¸ä¿®æ”¹ç¾æœ‰ç¨‹å¼ç¢¼çš„æƒ…æ³ä¸‹ï¼Œæ–°å¢æ–°åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç­–ç•¥æ¨¡å¼éå¸¸é©åˆè™•ç†éœ€è¦æ ¹æ“šæ¢ä»¶åŸ·è¡Œä¸åŒè¡Œç‚ºçš„å ´æ™¯ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä¸åŒçš„æŠ˜æ‰£ç­–ç•¥ (æ»¿é¡æŠ˜æ‰£ã€å­£ç¯€æ€§å„ªæƒ )ã€‚&lt;/li&gt;
  &lt;li&gt;ä¸åŒçš„æ’åºç®—æ³• (å¿«é€Ÿæ’åºã€åˆä½µæ’åº)ã€‚&lt;/li&gt;
  &lt;li&gt;å„é¡ç¹³ç¨…è¨ˆç®—æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç­–ç•¥æ¨¡å¼è®“ç³»çµ±æ›´å…·å½ˆæ€§ï¼Œç‚ºè¤‡é›œå•é¡Œæä¾›äº†ä¸€å€‹å„ªé›…çš„è§£æ±ºæ–¹æ¡ˆã€‚&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Strategy Pattern" /><summary type="html">ç­–ç•¥æ¨¡å¼æä¾›äº†ä¸€ç¨®éˆæ´»çš„è§£æ±ºæ–¹æ¡ˆï¼Œè®“ç³»çµ±èƒ½æ ¹æ“šéœ€æ±‚å‹•æ…‹åˆ‡æ›ä¸åŒçš„è¡Œç‚ºé‚è¼¯ï¼Œå¯¦ç¾é«˜å¯æ“´å±•æ€§èˆ‡ä½è€¦åˆæ€§ã€‚</summary></entry><entry><title type="html">Design Pattern (24) - State Pattern (ç‹€æ…‹æ¨¡å¼)</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-24-state-pattern/" rel="alternate" type="text/html" title="Design Pattern (24) - State Pattern (ç‹€æ…‹æ¨¡å¼)" /><published>2024-12-22T07:00:00+00:00</published><updated>2024-12-22T07:00:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-24-state-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-24-state-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘çš„ä»»å‹™æ˜¯è¨­è¨ˆä¸€å€‹ &lt;strong&gt;é£²æ°´æ©Ÿ&lt;/strong&gt;ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;é£²æ°´æ©Ÿæœ‰ä¸‰ç¨®ç‹€æ…‹ï¼š
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;åŠ ç†±ä¸­&lt;/strong&gt;ï¼šæå‡æ°´æº«è‡³ç†±æ°´ã€‚&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;å†·å»ä¸­&lt;/strong&gt;ï¼šé™ä½æ°´æº«è‡³å†·æ°´ã€‚&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;å¾…æ©Ÿä¸­&lt;/strong&gt;ï¼šç¶­æŒç¾æœ‰æ°´æº«ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨è€…å¯é€éæŒ‰éˆ•åˆ‡æ›é£²æ°´æ©Ÿçš„ç‹€æ…‹ã€‚&lt;/li&gt;
  &lt;li&gt;é£²æ°´æ©Ÿéœ€è¦æ ¹æ“šç•¶å‰ç‹€æ…‹åŸ·è¡Œæ­£ç¢ºçš„è¡Œç‚ºï¼Œä¾‹å¦‚åŠ ç†±ç‹€æ…‹æ™‚åŠ ç†±æ°´ï¼Œä½†ä¸å¯å†·å»ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘åˆ†æ-ooa&quot;&gt;ç‰©ä»¶å°å‘åˆ†æ (OOA)&lt;/h2&gt;

&lt;p&gt;ç†è§£éœ€æ±‚å¾Œï¼Œè®“æˆ‘å€‘ä¾†å¿«é€Ÿå¯¦ä½œç‰©ä»¶å°å‘åˆ†æå§!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_state_pattern_uml_1.png&quot; alt=&quot;state_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å¯Ÿè¦º-forces&quot;&gt;å¯Ÿè¦º Forces&lt;/h3&gt;

&lt;p&gt;åœ¨æœªä½¿ç”¨è¨­è¨ˆæ¨¡å¼çš„æƒ…æ³ä¸‹ï¼Œæˆ‘å€‘å¯èƒ½é¢è‡¨ä»¥ä¸‹æŒ‘æˆ°ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é«˜è€¦åˆæ€§ (High Coupling)&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;ç‹€æ…‹é‚è¼¯èˆ‡é£²æ°´æ©Ÿæ ¸å¿ƒåŠŸèƒ½æ··åˆåœ¨ä¸€èµ·ï¼Œå°è‡´ç¨‹å¼ç¢¼é›£ä»¥ç¶­è­·ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é•åå–®ä¸€è·è²¬åŸå‰‡ (SRP)&lt;/strong&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;é£²æ°´æ©Ÿé¡åˆ¥éœ€è¦åŒæ™‚è™•ç†ç‹€æ…‹é‚è¼¯èˆ‡ä¸»è¦åŠŸèƒ½ï¼Œè²¬ä»»éæ–¼ç¹é‡ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é›£ä»¥æ“´å±• (Hard to Extend)&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;æ–°å¢æˆ–ä¿®æ”¹ç‹€æ…‹è¡Œç‚ºéœ€æ›´æ”¹é£²æ°´æ©Ÿæ ¸å¿ƒé‚è¼¯ï¼Œé•åé–‹æ”¾é—œé–‰åŸå‰‡ (OCP)ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;å¥—ç”¨-state-pattern-solution-å¾—åˆ°æ–°çš„-context-resulting-context&quot;&gt;å¥—ç”¨ State Pattern (Solution) å¾—åˆ°æ–°çš„ Context (Resulting Context)&lt;/h2&gt;

&lt;p&gt;åšå®Œ OOAï¼Œå¯Ÿè¦º Forcesï¼Œçœ‹æ¸…æ¥šæ•´å€‹ Context å¾Œï¼Œå°±å¯ä»¥ä¾†å¥—ç”¨ State Pattern è§£æ±ºé€™å€‹å•é¡Œ&lt;/p&gt;

&lt;p&gt;å¯Ÿè¦º Forces å¾Œï¼Œæˆ‘å€‘å¯ä»¥å¥—ç”¨ &lt;strong&gt;State Pattern&lt;/strong&gt;ï¼Œå°‡ç‹€æ…‹é‚è¼¯å°è£æˆç¨ç«‹çš„é¡åˆ¥ï¼Œé”åˆ°ä»¥ä¸‹æ•ˆæœï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_state_pattern_uml_2.png&quot; alt=&quot;state_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç‹€æ…‹æ¨¡å¼æœ‰ä¸‰å€‹è§’è‰²:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;State (ç‹€æ…‹ä»‹é¢)&lt;/strong&gt;&lt;br /&gt;
å®šç¾©æ‰€æœ‰å…·é«”ç‹€æ…‹éœ€è¦å¯¦ç¾çš„è¡Œç‚ºã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ConcreteState (å…·é«”ç‹€æ…‹)&lt;/strong&gt;&lt;br /&gt;
æ¯å€‹å…·é«”ç‹€æ…‹é¡åˆ¥å¯¦ç¾ State ä»‹é¢ï¼Œä¸¦è² è²¬è©²ç‹€æ…‹ä¸‹çš„å…·é«”è¡Œç‚ºé‚è¼¯ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Context (ä¸Šä¸‹æ–‡)&lt;/strong&gt;&lt;br /&gt;
è² è²¬ç¶­è­·ç•¶å‰ç‹€æ…‹ï¼Œä¸¦æä¾›ä»‹é¢è®“å¤–éƒ¨æ“ä½œã€‚åœ¨åŸ·è¡Œæ“ä½œæ™‚ï¼Œå°‡è«‹æ±‚å§”æ´¾çµ¦ç•¶å‰ç‹€æ…‹ç‰©ä»¶ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;é£²æ°´æ©Ÿé¡åˆ¥è² è²¬ç‹€æ…‹ç®¡ç†ï¼Œè€Œéå…·é«”è¡Œç‚ºå¯¦ç¾ï¼Œé™ä½è€¦åˆåº¦ã€‚&lt;/li&gt;
  &lt;li&gt;æ¯å€‹ç‹€æ…‹å°ˆæ³¨æ–¼è‡ªèº«è¡Œç‚ºï¼Œç¬¦åˆå–®ä¸€è·è²¬åŸå‰‡ã€‚&lt;/li&gt;
  &lt;li&gt;æ–°å¢æˆ–ä¿®æ”¹ç‹€æ…‹ç„¡éœ€å½±éŸ¿é£²æ°´æ©Ÿæ ¸å¿ƒé‚è¼¯ï¼Œç¬¦åˆé–‹æ”¾é—œé–‰åŸå‰‡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å°‡ State Pattern å¥—ç”¨åˆ°æˆ‘å€‘çš„æ‡‰ç”¨å§&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_state_pattern_uml_3.png&quot; alt=&quot;state_pattern_uml_3&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘è¨­è¨ˆ-oop&quot;&gt;ç‰©ä»¶å°å‘è¨­è¨ˆ (OOP)&lt;/h2&gt;

&lt;p&gt;[State: WaterDispenserState]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WaterDispenserState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handleRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[ConcreteStates: HeatingState, CoolingState, StandbyState]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HeatingState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WaterDispenserState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handleRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;åŠ ç†±ä¸­ï¼šæ°´æº«æ­£åœ¨æå‡ï¼Œè«‹ç¨å€™...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CoolingState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WaterDispenserState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handleRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;å†·å»ä¸­ï¼šæ°´æº«æ­£åœ¨é™ä½ï¼Œè«‹ç¨å€™...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StandbyState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WaterDispenserState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handleRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;å¾…æ©Ÿä¸­ï¼šé£²æ°´æ©Ÿç¶­æŒç¾æœ‰æ°´æº«ï¼Œéš¨æ™‚å¯ç”¨ã€‚&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Context: WaterDispenser]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WaterDispenser&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;currentState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WaterDispenserState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StandbyState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WaterDispenserState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;currentState&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ç‹€æ…‹åˆ‡æ›ï¼š${state::class.simpleName}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pressButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;currentState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;handleRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Client]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;dispenser&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WaterDispenser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// åˆå§‹ç‹€æ…‹ç‚ºå¾…æ©Ÿä¸­&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispenser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pressButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// åˆ‡æ›åˆ°åŠ ç†±ç‹€æ…‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispenser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HeatingState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispenser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pressButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// åˆ‡æ›åˆ°å†·å»ç‹€æ…‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispenser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;CoolingState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispenser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pressButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// å›åˆ°å¾…æ©Ÿç‹€æ…‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispenser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;StandbyState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dispenser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pressButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Output]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;å¾…æ©Ÿä¸­ï¼šé£²æ°´æ©Ÿç¶­æŒç¾æœ‰æ°´æº«ï¼Œéš¨æ™‚å¯ç”¨ã€‚&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;ç‹€æ…‹åˆ‡æ›ï¼š&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HeatingState&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;åŠ ç†±ä¸­ï¼šæ°´æº«æ­£åœ¨æå‡ï¼Œè«‹ç¨å€™&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;ç‹€æ…‹åˆ‡æ›ï¼š&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;CoolingState&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;å†·å»ä¸­ï¼šæ°´æº«æ­£åœ¨é™ä½ï¼Œè«‹ç¨å€™&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;ç‹€æ…‹åˆ‡æ›ï¼š&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;StandbyState&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;å¾…æ©Ÿä¸­ï¼šé£²æ°´æ©Ÿç¶­æŒç¾æœ‰æ°´æº«ï¼Œéš¨æ™‚å¯ç”¨ã€‚&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;çµè«–&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;é€é State Patternï¼Œæˆ‘å€‘æˆåŠŸå°‡é£²æ°´æ©Ÿçš„ç‹€æ…‹é‚è¼¯èˆ‡æ ¸å¿ƒåŠŸèƒ½åˆ†é›¢ï¼Œå¯¦ç¾ä»¥ä¸‹å„ªå‹¢ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é™ä½è€¦åˆåº¦&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;é£²æ°´æ©Ÿé¡åˆ¥å°ˆæ³¨æ–¼ç‹€æ…‹åˆ‡æ›ï¼Œå…·é«”è¡Œç‚ºç”±ç‹€æ…‹é¡åˆ¥è² è²¬ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;ç¬¦åˆè¨­è¨ˆåŸå‰‡&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;å–®ä¸€è·è²¬åŸå‰‡ (SRP)ï¼šæ¯å€‹ç‹€æ…‹é¡åˆ¥å°ˆæ³¨æ–¼è‡ªèº«è¡Œç‚ºã€‚&lt;/li&gt;
  &lt;li&gt;é–‹æ”¾é—œé–‰åŸå‰‡ (OCP)ï¼šæ–°å¢ç‹€æ…‹ç„¡éœ€ä¿®æ”¹ç¾æœ‰ç¨‹å¼ç¢¼ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;æ˜“æ–¼æ“´å±•&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;æ–°å¢æˆ–ä¿®æ”¹ç‹€æ…‹è¡Œç‚ºæ™‚ï¼Œä¸å½±éŸ¿å…¶ä»–éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ­¤æ¨¡å¼ç‰¹åˆ¥é©åˆè™•ç†è¤‡é›œçš„ç‹€æ…‹è½‰æ›å ´æ™¯ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ATM æ©Ÿçš„æ’å¡ã€æ“ä½œã€å–å¡ç‹€æ…‹ã€‚&lt;/li&gt;
  &lt;li&gt;æ–‡æª”ç·¨è¼¯å™¨çš„ç·¨è¼¯ã€æª¢è¦–ã€åˆ—å°æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç‹€æ…‹æ¨¡å¼è®“ç¨‹å¼çµæ§‹æ›´å…·å½ˆæ€§ï¼Œæ˜¯é–‹ç™¼ç‹€æ…‹æ©Ÿåˆ¶æ‡‰ç”¨çš„æœ€ä½³é¸æ“‡ï¼&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="State Pattern" /><summary type="html">é€éç‹€æ…‹æ¨¡å¼ï¼Œè¨­è¨ˆä¸€å€‹é£²æ°´æ©Ÿçš„é‹ä½œæ©Ÿåˆ¶ï¼Œæ ¹æ“šä¸åŒç‹€æ…‹åŸ·è¡ŒåŠ ç†±ã€å†·å»æˆ–å¾…æ©Ÿçš„è¡Œç‚ºã€‚</summary></entry><entry><title type="html">Design Pattern (20) - Iterator Pattern (è¿­ä»£å™¨æ¨¡å¼)</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-20-iterator-pattern/" rel="alternate" type="text/html" title="Design Pattern (20) - Iterator Pattern (è¿­ä»£å™¨æ¨¡å¼)" /><published>2024-12-22T06:00:00+00:00</published><updated>2024-12-22T06:00:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-20-iterator-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-20-iterator-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘çš„ä»»å‹™æ˜¯è¨­è¨ˆä¸€å€‹æª”æ¡ˆç³»çµ±æœå°‹å·¥å…·ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä½¿ç”¨è€…å¯ä»¥é¸æ“‡ä¸åŒçš„æª”æ¡ˆæœå°‹æ–¹å¼ï¼Œä¾‹å¦‚ &lt;strong&gt;å»£åº¦å„ªå…ˆæœå°‹ (BFS)&lt;/strong&gt; æˆ– &lt;strong&gt;æ·±åº¦å„ªå…ˆæœå°‹ (DFS)&lt;/strong&gt;ã€‚&lt;/li&gt;
  &lt;li&gt;å®¢æˆ¶ç«¯ä¸éœ€è¦é—œå¿ƒæœå°‹é‚è¼¯çš„å¯¦ç¾ç´°ç¯€ï¼Œåªéœ€ä½¿ç”¨çµ±ä¸€çš„è¿­ä»£å™¨ä»‹é¢ä¾†éæ­·æœå°‹çµæœã€‚&lt;/li&gt;
  &lt;li&gt;ç³»çµ±éœ€è¦å…·å‚™æ“´å±•æ€§ï¼Œæ–¹ä¾¿æ–°å¢å…¶ä»–æœå°‹æ³•ï¼Œä¾‹å¦‚åŸºæ–¼æª”æ¡ˆå¤§å°æ’åºçš„æœå°‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘åˆ†æ-ooa&quot;&gt;ç‰©ä»¶å°å‘åˆ†æ (OOA)&lt;/h2&gt;

&lt;p&gt;ç†è§£éœ€æ±‚å¾Œï¼Œè®“æˆ‘å€‘ä¾†å¿«é€Ÿå¯¦ä½œç‰©ä»¶å°å‘åˆ†æå§ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_iterator_pattern_uml_1.png&quot; alt=&quot;iterator_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;å¯Ÿè¦º-forces&quot;&gt;å¯Ÿè¦º Forces&lt;/h2&gt;

&lt;p&gt;åœ¨æœªä½¿ç”¨è¨­è¨ˆæ¨¡å¼çš„æƒ…æ³ä¸‹ï¼Œæˆ‘å€‘å¯èƒ½é¢è‡¨ä»¥ä¸‹æŒ‘æˆ°ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é«˜è€¦åˆæ€§ (High Coupling)&lt;/strong&gt;ï¼š&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;å®¢æˆ¶ç«¯éœ€è¦ç›´æ¥æ“ä½œæ¯ç¨®æœå°‹æ–¹å¼çš„å¯¦ç¾ç´°ç¯€ï¼Œå°è‡´ä»£ç¢¼è‡ƒè…«ä¸”é›£ä»¥ç¶­è­·ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ç¼ºä¹ä¸€è‡´æ€§ (Lack of Consistency)&lt;/strong&gt;ï¼š&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;ä¸åŒæœå°‹æ–¹å¼çš„çµæœè¨ªå•æ–¹å¼å¯èƒ½ä¸ä¸€è‡´ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é•åé–‹æ”¾é—œé–‰åŸå‰‡ (Violates OCP)&lt;/strong&gt;ï¼š&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;è‹¥æ–°å¢æœå°‹æ³•æˆ–æ›´æ”¹ç¾æœ‰æœå°‹é‚è¼¯ï¼Œéœ€è¦ä¿®æ”¹å®¢æˆ¶ç«¯ç¨‹å¼ç¢¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;å¥—ç”¨-iterator-pattern-solution-å¾—åˆ°æ–°çš„-context-resulting-context&quot;&gt;å¥—ç”¨ Iterator Pattern (Solution) å¾—åˆ°æ–°çš„ Context (Resulting Context)&lt;/h2&gt;

&lt;p&gt;åšå®Œ OOAï¼Œå¯Ÿè¦º Forcesï¼Œçœ‹æ¸…æ¥šæ•´å€‹ Context å¾Œï¼Œå°±å¯ä»¥ä¾†å¥—ç”¨ Iterator Pattern è§£æ±ºé€™å€‹å•é¡Œã€‚&lt;/p&gt;

&lt;p&gt;è¿­ä»£å™¨æ¨¡å¼å…è¨±æˆ‘å€‘å°æœå°‹çµæœé€²è¡Œé †åºè¨ªå•ï¼Œè€Œä¸éœ€è¦æš´éœ²æœå°‹é‚è¼¯çš„ç´°ç¯€ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆä¾†çœ‹ä¸€ä¸‹ Iterator Pattern çš„ UMLï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_iterator_pattern_uml_2.png&quot; alt=&quot;iterator_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯ Iterator Pattern çš„ä¸»è¦è§’è‰²ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Iterator (è¿­ä»£å™¨ä»‹é¢)&lt;/strong&gt;ï¼šå®šç¾©è¨ªå•æœå°‹çµæœçš„æ–¹æ³•ï¼Œä¾‹å¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hasNext()&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;next()&lt;/code&gt;ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ConcreteIterator (å…·é«”è¿­ä»£å™¨)&lt;/strong&gt;ï¼šå¯¦ç¾ä¸åŒçš„æœå°‹é‚è¼¯ï¼Œå¦‚ BFS æˆ– DFSã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Aggregate (èšåˆä»‹é¢)&lt;/strong&gt;ï¼šå®šç¾©æ–¹æ³•ä¾†å‰µå»ºè¿­ä»£å™¨ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ConcreteAggregate (å…·é«”èšåˆé¡åˆ¥)&lt;/strong&gt;ï¼šå¯¦ç¾èšåˆä»‹é¢ï¼Œæä¾›æª”æ¡ˆç³»çµ±è³‡æ–™çš„å…·é«”å¯¦ç¾ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å°‡ Iterator Pattern å¥—ç”¨åˆ°æˆ‘å€‘çš„æ‡‰ç”¨å§&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_iterator_pattern_uml_3.png&quot; alt=&quot;iterator_pattern_uml_3&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ-oop&quot;&gt;ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ (OOP)&lt;/h2&gt;

&lt;p&gt;[Iterator]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hasNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Aggregate: FileSystem]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FileSystem&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createIterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[ConcreteIterator: BFSIterator, DFSIterator]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BFSIterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ArrayDeque&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;

    &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hasNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isNotEmpty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hasNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NoSuchElementException&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;removeFirst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;listFiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;orEmpty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DFSIterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;stack&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ArrayDeque&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;

    &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;stack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hasNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isNotEmpty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hasNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NoSuchElementException&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;removeLast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;stack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;listFiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;orEmpty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[ConcreteAggregate: DefaultFileSystem]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DefaultFileSystem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;searchMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SearchMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FileSystem&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createIterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;searchMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;SearchMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;BFS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BFSIterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;SearchMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;DFS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DFSIterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SearchMethod&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;BFS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DFS&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[File]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;data class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;isDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;emptyList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listFiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;children&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;emptyList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Client]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;fileSystem&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DefaultFileSystem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;root&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;isDirectory&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;children&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;file1.txt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;folder1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;file2.txt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                    &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;file3.txt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;
                &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;folder2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;nc&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;file4.txt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;searchMethod&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SearchMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;BFS&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;iterator&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileSystem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;createIterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Files:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hasNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;- ${iterator.next().name}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Output]&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Files:
- root
- file1.txt
- folder1
- folder2
- file2.txt
- file3.txt
- file4.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;çµè«–&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;é€é Iterator Patternï¼Œæˆ‘å€‘æˆåŠŸå¯¦ç¾äº†ä¸åŒæœå°‹æ³•çš„æ•´åˆï¼Œè®“å®¢æˆ¶ç«¯èƒ½ä»¥ä¸€è‡´çš„æ–¹å¼è¨ªå•æœå°‹çµæœã€‚æ­¤æ¨¡å¼æå‡äº†ç³»çµ±çš„éˆæ´»æ€§èˆ‡æ“´å±•æ€§ï¼Œç‰¹åˆ¥é©åˆè™•ç†å¤šç¨®éæ­·é‚è¼¯çš„å ´æ™¯ï¼Œä¾‹å¦‚æª”æ¡ˆæœå°‹ã€æ¨¹ç‹€çµæ§‹éæ­·ç­‰ã€‚&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Iterator Pattern" /><summary type="html">äº†è§£è¿­ä»£å™¨æ¨¡å¼å¦‚ä½•æä¾›ä¸€ç¨®é †åºä¾†è¨ªå•é›†åˆå…§å…ƒç´ çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦æš´éœ²é›†åˆçš„åº•å±¤è¡¨ç¤ºã€‚</summary></entry><entry><title type="html">Design Pattern (21) - Mediator Pattern (ä¸­ä»‹è€…æ¨¡å¼)</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-21-mediator-pattern/" rel="alternate" type="text/html" title="Design Pattern (21) - Mediator Pattern (ä¸­ä»‹è€…æ¨¡å¼)" /><published>2024-12-22T06:00:00+00:00</published><updated>2024-12-22T06:00:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-21-mediator-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-21-mediator-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘çš„ä»»å‹™æ˜¯è¨­è¨ˆä¸€å€‹ &lt;strong&gt;èŠå¤©å®¤æ‡‰ç”¨ç¨‹å¼&lt;/strong&gt;ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä½¿ç”¨è€…å¯ä»¥é€éèŠå¤©å®¤å‚³éè¨Šæ¯ã€‚&lt;/li&gt;
  &lt;li&gt;æ¯å€‹ä½¿ç”¨è€…éƒ½ä¸éœ€è¦ç›´æ¥ç®¡ç†å…¶ä»–ä½¿ç”¨è€…çš„è³‡è¨Šã€‚&lt;/li&gt;
  &lt;li&gt;æ–°å¢æˆ–ç§»é™¤ä½¿ç”¨è€…ä¸æ‡‰å½±éŸ¿å…¶ä»–ä½¿ç”¨è€…çš„é‹ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘åˆ†æ-ooa&quot;&gt;ç‰©ä»¶å°å‘åˆ†æ (OOA)&lt;/h2&gt;

&lt;p&gt;ç†è§£éœ€æ±‚å¾Œï¼Œæˆ‘å€‘ä¾†å¿«é€Ÿåˆ†æï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è‹¥ä½¿ç”¨è€…å½¼æ­¤ç›´æ¥é€šä¿¡ï¼Œæœƒå°è‡´è¤‡é›œçš„ç›¸ä¾é—œä¿‚ï¼Œå¢åŠ ç¶­è­·æˆæœ¬ã€‚&lt;/li&gt;
  &lt;li&gt;æˆ‘å€‘éœ€è¦ä¸€å€‹é›†ä¸­ç®¡ç†çš„è§’è‰²ï¼Œä¾†å”èª¿ä½¿ç”¨è€…ä¹‹é–“çš„è¨Šæ¯å‚³éã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_mediator_pattern_uml_1.png&quot; alt=&quot;mediator_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;å¯Ÿè¦º-forces&quot;&gt;å¯Ÿè¦º Forces&lt;/h2&gt;

&lt;p&gt;åœ¨æœªä½¿ç”¨è¨­è¨ˆæ¨¡å¼çš„æƒ…æ³ä¸‹ï¼Œæˆ‘å€‘å¯èƒ½é¢è‡¨ä»¥ä¸‹æŒ‘æˆ°ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é«˜è€¦åˆæ€§ (High Coupling)&lt;/strong&gt;ï¼š&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;ä½¿ç”¨è€…å½¼æ­¤ä¹‹é–“ç›´æ¥é€šä¿¡ï¼Œå°è‡´æ–°å¢æˆ–ç§»é™¤ä½¿ç”¨è€…æ™‚éœ€ä¿®æ”¹å¤šè™•ç¨‹å¼ç¢¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é›£ä»¥æ“´å±• (Hard to Extend)&lt;/strong&gt;ï¼š&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;è‹¥è¦å¢åŠ æ–°åŠŸèƒ½ï¼ˆå¦‚è¨Šæ¯éæ¿¾æˆ–å»£æ’­æ©Ÿåˆ¶ï¼‰ï¼Œéœ€è¦ä¿®æ”¹å¤šå€‹ä½¿ç”¨è€…çš„é‚è¼¯ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;è¤‡é›œåº¦ä¸Šå‡ (Increased Complexity)&lt;/strong&gt;ï¼š&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;ä½¿ç”¨è€…ä¹‹é–“çš„é—œè¯æ•¸é‡éš¨è‘—ä½¿ç”¨è€…æ•¸é‡å¢é•·å‘ˆæŒ‡æ•¸ç´šå¢åŠ ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;å¥—ç”¨-mediator-pattern-solution-å¾—åˆ°æ–°çš„-context-resulting-context&quot;&gt;å¥—ç”¨ Mediator Pattern (Solution) å¾—åˆ°æ–°çš„ Context (Resulting Context)&lt;/h2&gt;

&lt;p&gt;åšå®Œ OOAï¼Œå¯Ÿè¦º Forcesï¼Œçœ‹æ¸…æ¥šæ•´å€‹ Context å¾Œï¼Œå°±å¯ä»¥ä¾†å¥—ç”¨ Mediator Pattern è§£æ±ºé€™å€‹å•é¡Œã€‚&lt;/p&gt;

&lt;p&gt;ä¸­ä»‹è€…æ¨¡å¼å¼•å…¥äº†ä¸€å€‹ä¸­ä»‹è€…ä¾†è² è²¬å”èª¿ä½¿ç”¨è€…ä¹‹é–“çš„äº¤äº’ã€‚ä½¿ç”¨è€…åªéœ€èˆ‡ä¸­ä»‹è€…é€šä¿¡ï¼Œå¾è€Œé™ä½ç›¸äº’ä¹‹é–“çš„è€¦åˆæ€§ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯ Mediator Pattern çš„ UML åœ–ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_mediator_pattern_uml_2.png&quot; alt=&quot;mediator_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Mediator Pattern çš„ä¸»è¦è§’è‰²ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Mediator (ä¸­ä»‹è€…ä»‹é¢)&lt;/strong&gt;ï¼šå®šç¾©å”èª¿åƒèˆ‡è€…çš„æ–¹æ³•ï¼Œä¾‹å¦‚å‚³éè¨Šæ¯ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ConcreteMediator (å…·é«”ä¸­ä»‹è€…)&lt;/strong&gt;ï¼šå¯¦ç¾ä¸­ä»‹è€…çš„è¡Œç‚ºï¼Œè™•ç†ä½¿ç”¨è€…ä¹‹é–“çš„è¨Šæ¯å‚³éã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Colleague (åŒäº‹é¡åˆ¥)&lt;/strong&gt;ï¼šè¡¨ç¤ºåƒèˆ‡è€…ï¼Œæ‰€æœ‰è¨Šæ¯å‡é€šéä¸­ä»‹è€…é€²è¡Œå‚³éã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ConcreteColleague (å…·é«”åŒäº‹é¡åˆ¥)&lt;/strong&gt;ï¼šå¯¦ç¾å…·é«”åƒèˆ‡è€…çš„è¡Œç‚ºï¼Œä¸¦ä¾è³´ä¸­ä»‹è€…é€²è¡Œé€šä¿¡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è®“æˆ‘å€‘å°‡ Mediator Pattern å¥—ç”¨åˆ°èŠå¤©å®¤æ‡‰ç”¨ç¨‹å¼ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_mediator_pattern_uml_3.png&quot; alt=&quot;mediator_pattern_uml_3&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ-oop&quot;&gt;ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ (OOP)&lt;/h2&gt;

&lt;p&gt;[Mediator]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatMediator&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sendMessage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;addUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[ConcreteMediator]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatRoomMediator&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatMediator&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableListOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sendMessage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;forEach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;addUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Colleague]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;mediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatMediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[ConcreteColleague]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatMediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;$name ç™¼é€è¨Šæ¯ï¼š$message&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;mediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sendMessage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;$name æ”¶åˆ°è¨Šæ¯ï¼š$message&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Client]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;chatMediator&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatRoomMediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;user1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chatMediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;user2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chatMediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Bob&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;user3&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ChatUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chatMediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Charlie&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;chatMediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;chatMediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;chatMediator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;user1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello, everyone!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;user2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hi, Alice!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[Output]&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Alice&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;ç™¼é€è¨Šæ¯ï¼š&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;everyone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Bob&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æ”¶åˆ°è¨Šæ¯ï¼š&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;everyone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Charlie&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æ”¶åˆ°è¨Šæ¯ï¼š&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;everyone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Bob&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;ç™¼é€è¨Šæ¯ï¼š&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Alice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Alice&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æ”¶åˆ°è¨Šæ¯ï¼š&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Alice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Charlie&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æ”¶åˆ°è¨Šæ¯ï¼š&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Alice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;çµè«–&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;é€éä¸­ä»‹è€…æ¨¡å¼ï¼Œæˆ‘å€‘æˆåŠŸé™ä½äº†ä½¿ç”¨è€…ä¹‹é–“çš„è€¦åˆæ€§ï¼Œä¸¦å¯¦ç¾äº†éˆæ´»çš„è¨Šæ¯å‚³éæ©Ÿåˆ¶ã€‚æ­¤æ¨¡å¼éå¸¸é©åˆè™•ç†å¤šç‰©ä»¶ä¹‹é–“çš„äº¤äº’ï¼Œä¾‹å¦‚èŠå¤©å®¤ã€äº‹ä»¶ç³»çµ±æˆ– GUI çµ„ä»¶é€šä¿¡ç­‰å ´æ™¯ã€‚&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Mediator Pattern" /><summary type="html">äº†è§£ä¸­ä»‹è€…æ¨¡å¼å¦‚ä½•å”èª¿ç‰©ä»¶ä¹‹é–“çš„äº¤äº’ï¼Œæ¸›å°‘ç‰©ä»¶ä¹‹é–“çš„è€¦åˆæ€§ä¸¦ä¿ƒé€²ç³»çµ±çš„å¯æ“´å±•æ€§ã€‚</summary></entry><entry><title type="html">Design Pattern (22) - Memento Pattern (å‚™å¿˜éŒ„æ¨¡å¼)</title><link href="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-22-memento-pattern/" rel="alternate" type="text/html" title="Design Pattern (22) - Memento Pattern (å‚™å¿˜éŒ„æ¨¡å¼)" /><published>2024-12-22T06:00:00+00:00</published><updated>2024-12-22T06:00:00+00:00</updated><id>https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-22-memento-pattern</id><content type="html" xml:base="https://nickhuangcyh.github.io/blog/design%20pattern/design-pattern-22-memento-pattern/">&lt;blockquote&gt;
  &lt;p&gt;æ‚¨å¯æ–¼æ­¤ &lt;a href=&quot;https://github.com/nickhuangcyh/design_pattern&quot;&gt;design_pattern repo&lt;/a&gt; ä¸‹è¼‰ Design Pattern ç³»åˆ—ç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h2&gt;

&lt;p&gt;æˆ‘å€‘çš„ä»»å‹™æ˜¯è¨­è¨ˆä¸€å€‹æ–‡å­—ç·¨è¼¯å™¨ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä½¿ç”¨è€…å¯ä»¥è¼¸å…¥æ–‡å­—ï¼Œä¸¦éš¨æ™‚æŒ‰ä¸‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl+Z&lt;/code&gt; å›å¾©ä¸Šä¸€æ­¥ã€‚&lt;/li&gt;
  &lt;li&gt;ç³»çµ±éœ€è¦ä¿å­˜æ­·å²ç‹€æ…‹ä»¥ä¾›å›å¾©ã€‚&lt;/li&gt;
  &lt;li&gt;å®¢æˆ¶ç«¯ä¸éœ€è¦äº†è§£ç‹€æ…‹ä¿å­˜çš„å¯¦ç¾ç´°ç¯€ï¼Œåªéœ€ä½¿ç”¨ä¸€å€‹ç°¡å–®çš„å›å¾©æ“ä½œå³å¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘åˆ†æ-ooa&quot;&gt;ç‰©ä»¶å°å‘åˆ†æ (OOA)&lt;/h2&gt;

&lt;p&gt;ç†è§£éœ€æ±‚å¾Œï¼Œè®“æˆ‘å€‘ä¾†å¿«é€Ÿå¯¦ä½œç‰©ä»¶å°å‘åˆ†æå§!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_memento_pattern_uml_1.png&quot; alt=&quot;memento_pattern_uml_1&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å¯Ÿè¦º-forces&quot;&gt;å¯Ÿè¦º Forces&lt;/h3&gt;

&lt;p&gt;åœ¨æœªä½¿ç”¨è¨­è¨ˆæ¨¡å¼çš„æƒ…æ³ä¸‹ï¼Œæˆ‘å€‘å¯èƒ½é¢è‡¨ä»¥ä¸‹æŒ‘æˆ°ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;è³‡æ–™å–ªå¤±é¢¨éšª (Data Loss Risk)&lt;/strong&gt;ï¼š&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;å¦‚æœæˆ‘å€‘åƒ…ä¿ç•™ç•¶å‰ç‹€æ…‹ï¼Œå°‡ç„¡æ³•å›å¾©åˆ°ä¹‹å‰çš„ç‹€æ…‹ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é«˜è€¦åˆæ€§ (High Coupling)&lt;/strong&gt;ï¼š&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;å®¢æˆ¶ç«¯éœ€è¦ç›´æ¥æ“ä½œç‹€æ…‹ç®¡ç†é‚è¼¯ï¼Œå°è‡´è¤‡é›œæ€§å¢åŠ ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;é›£ä»¥æ“´å±• (Hard to Extend)&lt;/strong&gt;ï¼š&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;æ–°å¢åŠŸèƒ½æˆ–æ”¹è®Šç‹€æ…‹ä¿å­˜æ–¹å¼æ™‚ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹å¤§é‡ç¨‹å¼ç¢¼ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;å¥—ç”¨-memento-pattern-solution-å¾—åˆ°æ–°çš„-context-resulting-context&quot;&gt;å¥—ç”¨ Memento Pattern (Solution) å¾—åˆ°æ–°çš„ Context (Resulting Context)&lt;/h2&gt;

&lt;p&gt;åšå®Œ OOAï¼Œå¯Ÿè¦º Forcesï¼Œçœ‹æ¸…æ¥šæ•´å€‹ Context å¾Œï¼Œå°±å¯ä»¥ä¾†å¥—ç”¨ Memento Pattern è§£æ±ºé€™å€‹å•é¡Œ&lt;/p&gt;

&lt;p&gt;å…ˆä¾†çœ‹ä¸€ä¸‹ Memento Pattern çš„ UML&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_memento_pattern_uml_2.png&quot; alt=&quot;memento_pattern_uml_2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å‚™å¿˜éŒ„æ¨¡å¼å¼•å…¥äº†ä¸‰å€‹è§’è‰²ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Originator (ç™¼èµ·è€…)&lt;/strong&gt;ï¼šä¿å­˜ç•¶å‰ç‹€æ…‹åˆ°å‚™å¿˜éŒ„ï¼Œæˆ–å¾å‚™å¿˜éŒ„ä¸­æ¢å¾©ç‹€æ…‹ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Memento (å‚™å¿˜éŒ„)&lt;/strong&gt;ï¼šå­˜å„² Originator çš„å…§éƒ¨ç‹€æ…‹ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Caretaker (ç®¡ç†è€…)&lt;/strong&gt;ï¼šè² è²¬ä¿å­˜å’Œæ¢å¾©å‚™å¿˜éŒ„ï¼Œä½†ä¸ç›´æ¥æ“ä½œå…¶å…§å®¹ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å°‡ Memento Pattern å¥—ç”¨åˆ°æˆ‘å€‘çš„æ‡‰ç”¨å§&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/design_pattern_memento_pattern_uml_3.png&quot; alt=&quot;memento_pattern_uml_3&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ-oop&quot;&gt;ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ (OOP)&lt;/h2&gt;

&lt;h3 id=&quot;originator&quot;&gt;Originator&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TextEditor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newText&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memento&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;restore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;data class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;caretaker&quot;&gt;Caretaker&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;History&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;mementos&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mutableListOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;TextEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TextEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;mementos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;undo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TextEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Memento&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mementos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isNotEmpty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mementos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;removeAt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mementos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;client&quot;&gt;Client&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;textEditor&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TextEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;history&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;History&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Typing string&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;textEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;history&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;textEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;textEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;, World&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;history&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;textEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;textEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;! This is Memento Pattern.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Current Textï¼š${textEditor.getText()}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Output: Hello, World! This is Memento Pattern.&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Pressed Ctrl+Z&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;textEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;restore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;history&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;undo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Excute undo Textï¼š${textEditor.getText()}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Output: Hello, World!&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Pressed Ctrl+Z again&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;textEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;restore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;history&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;undo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Excute undo Textï¼š${textEditor.getText()}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Output: Hello&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;output&quot;&gt;Output&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Current Textï¼š Hello, World! This is Memento Pattern.
Excute undo Textï¼š Hello, World!
Excute undo Textï¼š Hello
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;çµè«–&quot;&gt;çµè«–&lt;/h2&gt;

&lt;p&gt;é€éå‚™å¿˜éŒ„æ¨¡å¼ï¼Œæˆ‘å€‘æˆåŠŸå¯¦ç¾äº†æ–‡å­—ç·¨è¼¯å™¨çš„ç‹€æ…‹æ¢å¾©åŠŸèƒ½ï¼Œè®“ä½¿ç”¨è€…èƒ½å¤ è¼•é¬†åœ°å›å¾©åˆ°ä¹‹å‰çš„æ“ä½œç‹€æ…‹ã€‚é€™ç¨®æ¨¡å¼å»£æ³›æ‡‰ç”¨æ–¼æ–‡å­—è™•ç†å™¨ã€éŠæˆ²ä¿å­˜ç³»çµ±ä»¥åŠå…¶ä»–éœ€è¦ç‹€æ…‹æ¢å¾©çš„å ´æ™¯ã€‚&lt;/p&gt;</content><author><name>Nick Huang</name></author><category term="Design Pattern" /><category term="Memento Pattern" /><summary type="html">äº†è§£å‚™å¿˜éŒ„æ¨¡å¼å¦‚ä½•å¹«åŠ©æˆ‘å€‘å¯¦ç¾ç‹€æ…‹æ¢å¾©ï¼Œåƒæ˜¯å¸¸è¦‹çš„ Ctrl+Z åŠŸèƒ½ï¼Œè®“æˆ‘å€‘å›åˆ°ä¹‹å‰çš„æ“ä½œç‹€æ…‹ã€‚</summary></entry></feed>